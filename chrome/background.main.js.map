{"version":3,"file":"background.main.js","mappings":"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","sources":["webpack://juejin-plugin/./src/api/content.js","webpack://juejin-plugin/./src/api/index.js","webpack://juejin-plugin/./src/api/interact.js","webpack://juejin-plugin/./src/api/message.js","webpack://juejin-plugin/./src/api/recommend.js","webpack://juejin-plugin/./src/api/tag.js","webpack://juejin-plugin/./src/api/user.js","webpack://juejin-plugin/./src/config/index.ts","webpack://juejin-plugin/./src/pages/background/chrome.js","webpack://juejin-plugin/./src/pages/background/controller/contextMenus.js","webpack://juejin-plugin/./src/pages/background/controller/message.js","webpack://juejin-plugin/./src/pages/background/controller/pin.js","webpack://juejin-plugin/./src/pages/background/controller/tabs.js","webpack://juejin-plugin/./src/pages/background/controller/user.js","webpack://juejin-plugin/./src/tool/index.js","webpack://juejin-plugin/./node_modules/dayjs/dayjs.min.js","webpack://juejin-plugin/./node_modules/dayjs/locale/zh-cn.js","webpack://juejin-plugin/./node_modules/dayjs/plugin/relativeTime.js","webpack://juejin-plugin/./node_modules/dayjs/plugin/weekday.js","webpack://juejin-plugin/webpack/bootstrap","webpack://juejin-plugin/webpack/runtime/compat get default export","webpack://juejin-plugin/webpack/runtime/define property getters","webpack://juejin-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://juejin-plugin/webpack/runtime/make namespace object","webpack://juejin-plugin/./src/pages/background/index.js"],"sourcesContent":["// 内容相关\r\nimport { ajax } from \"./index\";\r\n\r\n/*\r\n* 删除沸点\r\n* */\r\nexport const removeShortMsg = (msgId) => ajax({\r\n\turl: `https://api.juejin.cn/content_api/v1/short_msg/delete`,\r\n\tmethod: 'POST',\r\n\tdata: { msg_id: msgId }\r\n})\r\n\r\n/*\r\n* 获取用户沸点列表\r\n* */\r\nexport const getShortMsgList = ({ userId, cursor = 0, sortType = 4, limit = 999 }) => ajax({\r\n\turl: `https://api.juejin.cn/content_api/v1/short_msg/query_list`,\r\n\tmethod: 'POST',\r\n\tdata: { user_id: userId, cursor: cursor.toString(), sort_type: sortType, limit: limit }\r\n})","export const ajax = async ({ url, method = 'GET', data, headers = { \"Content-Type\": \"application/json\" } }) => {\r\n\tlet res = await fetch(url, {\r\n\t\tmethod,\r\n\t\tbody: JSON.stringify(data),\r\n\t\tcredentials: 'include',\r\n\t\theaders,\r\n\t}).then(res => res.json())\r\n\treturn handleApiResult(res);\r\n}\r\n\r\nexport const handleApiResult = (apiRes) => {\r\n\treturn Object.assign({}, apiRes, { success: apiRes.err_no === 0 })\r\n}","import { ajax } from \"./index\";\r\n\r\n\r\n/*\r\n* 获取点赞列表\r\n* @param item_type 4：沸点\r\n* @param sort_type 2：时间倒序\r\n* */\r\nexport const diggQueryPage = ({ cursor = 0, item_type = 4, sort_type = 2, user_id }) => ajax({\r\n\turl: `https://api.juejin.cn/interact_api/v1/digg/query_page`,\r\n\tmethod: 'POST',\r\n\tdata: { cursor: cursor.toString(), item_type, sort_type, user_id }\r\n})\r\n\r\n/*\r\n* 取消点赞\r\n* @param itemId id\r\n* @param itemType 4：沸点\r\n* */\r\nexport const cancelDigg = (itemId, itemType) => ajax({\r\n\turl: `https://api.juejin.cn/interact_api/v1/digg/cancel`,\r\n\tmethod: 'POST',\r\n\tdata: { item_id: itemId, item_type: itemType }\r\n})","// 消息相关\r\nimport { ajax } from \"./index\";\r\n\r\nexport const getNotReadMessageCount = () => ajax({\r\n\turl: `https://api.juejin.cn/interact_api/v1/message/count`\r\n})","import { ajax } from \"./index\";\r\n\r\nexport const getTopicShortMsgList = ({ topic_id, cursor = 0, id_type = 4, limit = 10, sort_type = 500 }) => ajax({\r\n\turl: `https://api.juejin.cn/recommend_api/v1/short_msg/topic`,\r\n\tmethod: \"POST\",\r\n\tdata: { topic_id, cursor: cursor.toString(), id_type, limit, sort_type }\r\n})","import { ajax } from \"./index\";\r\n\r\n/*\r\n* 获取沸点圈子详情\r\n* */\r\n\r\nexport const queryTopicDetail = (topicId) => ajax({\r\n\turl: `https://api.juejin.cn/tag_api/v1/query_topic_detail`,\r\n\tmethod: 'POST',\r\n\tdata: { topic_id: topicId }\r\n})","// 用户相关\r\nimport { ajax } from \"./index\";\r\n\r\n/*\r\n* 用户登出\r\n* */\r\nexport const logout = () => ajax({\r\n\turl: 'https://juejin.cn/passport/web/logout/'\r\n})\r\n\r\n/*\r\n* 登录人获取自己的信息\r\n* */\r\nexport const getSelfInfo = () => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/user/get_info_pack`,\r\n\tmethod: 'POST',\r\n\tdata: { pack_req: { user_counter: true, user_growth_info: true, user: true } }\r\n})\r\n\r\n/*\r\n* 获取用户信息\r\n* @param userId 用户id\r\n* */\r\nexport const getUserInfo = (userId) => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/user/get?user_id=${userId}`\r\n})\r\n\r\n/*\r\n* 用户签到\r\n* */\r\nexport const checkIn = () => ajax({\r\n\turl: 'https://api.juejin.cn/growth_api/v1/check_in',\r\n\tmethod: 'POST'\r\n})\r\n\r\n/*\r\n* 获取未收集的bug\r\n* */\r\nexport const getNotCollectBug = () => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/bugfix/not_collect`,\r\n\tmethod: 'POST',\r\n\theaders: {}\r\n})\r\n\r\n/*\r\n* 收集bug\r\n* @param bug bug对象\r\n* */\r\nexport const collectBug = (bug) => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/bugfix/collect`,\r\n\tmethod: 'POST',\r\n\tdata: bug\r\n})\r\n\r\n/*\r\n* 获取今日免费抽奖次数\r\n* */\r\nexport const getLotteryConfig = () => ajax({\r\n\turl: `https://api.juejin.cn/growth_api/v1/lottery_config/get`,\r\n})\r\n\r\n/*\r\n* 抽奖\r\n* */\r\nexport const drawLottery = () => ajax({\r\n\turl: `https://api.juejin.cn/growth_api/v1/lottery/draw`,\r\n\tmethod: 'POST'\r\n})\r\n\r\n\r\n/*\r\n* 获取用户动态\r\n* @param userId 用户id\r\n* @param cursor 偏移数\r\n* */\r\nexport const getDynamic = (userId, cursor) => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/user/dynamic?user_id=${userId}&cursor=${cursor}`\r\n})","export default {\r\n  iconUrl: \"static/img/icon.png\"\r\n};\r\n","import dayjs from 'dayjs';\r\nimport config from \"../../config\";\r\nimport { uuid } from \"../../tool\";\r\n\r\n/*\r\n* 设置缓存\r\n* @param key 名称\r\n* @param value 数据\r\n* @param minute 缓存多少分钟，如果没有则永久缓存\r\n* */\r\nexport const setStorage = async (key, value, minute) => {\r\n\tlet setTime = dayjs().format('YYYY-MM-DD HH:mm:ss');\r\n\tlet overdueTime = minute !== undefined ? dayjs(setTime).add(minute, 'minute').format('YYYY-MM-DD HH:mm:ss') : null;\r\n\tlet storage = { [key]: { value, setTime, overdueTime } }\r\n\tawait chrome.storage.local.set(storage);\r\n}\r\n\r\n/*\r\n* 获取缓存\r\n* @param key 名称\r\n* */\r\nexport const getStorage = async (key) => {\r\n\tlet storage = (await chrome.storage.local.get())[key];\r\n\tif (!storage) return null;\r\n\t// 如果结束时间存在 && 当前时间不在结束之间之前\r\n\tif (storage.overdueTime && !dayjs().isBefore(storage.overdueTime)) return null;\r\n\treturn storage.value;\r\n}\r\n\r\n/*\r\n* 发送桌面通知\r\n* @param title 标题\r\n* @param message 内容\r\n* */\r\nexport const sendBasicNotifications = (title, message) => {\r\n\tchrome.notifications.getPermissionLevel(level => {\r\n\t\tif (level === 'granted') {\r\n\t\t\tchrome.notifications.create(uuid(), {\r\n\t\t\t\ttype: 'basic',\r\n\t\t\t\ttitle,\r\n\t\t\t\tmessage,\r\n\t\t\t\ticonUrl: config.iconUrl,\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n}\r\n\r\n/*\r\n* 创建tab\r\n* @param tab 标签信息\r\n* */\r\nexport const createTab = (tab) => {\r\n\treturn chrome.tabs.create(tab);\r\n}\r\n\r\n/*\r\n* 查询tabs\r\n* @param search 需要查询的条件\r\n* */\r\nexport const queryTabs = (search = {}) => {\r\n\treturn chrome.tabs.query(search)\r\n}\r\n\r\n/*\r\n* 修改tab\r\n* @param tabId 标签id\r\n* @param tab 标签信息\r\n* */\r\nexport const updateTab = (tabId, tab) => {\r\n\treturn chrome.tabs.update(tabId, tab);\r\n}\r\n\r\n/*\r\n* 给标签页发信息\r\n* */\r\nexport const sendMessageToTab = (tabId, info) => {\r\n\treturn chrome.tabs.sendMessage(tabId, Object.assign(info, { from: 'background' }))\r\n}\r\n\r\n/*\r\n* 创建菜单\r\n* @param menu 按钮信息\r\n* */\r\nexport const createContextMenu = (menu) => {\r\n\tconsole.log(menu);\r\n\treturn chrome.contextMenus.create(menu);\r\n}\r\n\r\n/*\r\n* 删除全部菜单\r\n* */\r\nexport const removeAllContextMenus = () => {\r\n\treturn chrome.contextMenus.removeAll();\r\n}","import { getSelfStorage, logout, signin, bugfix, freeLucky } from \"./user\";\r\nimport { createContextMenu, createTab, removeAllContextMenus } from \"../chrome\";\r\n\r\n\r\nlet resetContextMenusIng = false;\r\n\r\n/*\r\n* 重置所有右键菜单\r\n* */\r\nexport const resetContextMenus = async () => {\r\n\tif (resetContextMenusIng) return;\r\n\tresetContextMenusIng = true;\r\n\t// 移除所有菜单\r\n\tawait removeAllContextMenus()\r\n\t// 获取用户信息\r\n\tlet user = await getSelfStorage();\r\n\t// 已登录\r\n\tif (user) {\r\n\t\tawait createContextMenu({ id: \"MENU_PARENT\", title: `${user.user_basic.user_name}的掘金`, contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"SELF_HOME\", title: \"我的主页\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"SELF_NOTIFICATION\", title: \"我的消息\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"separator1\", type: \"separator\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"SIGN_IN\", title: \"快速签到\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t\tawait createContextMenu({ id: \"BUG_FIX\", title: \"收集BUG\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t\tawait createContextMenu({ id: 'FREE_LUCKY_DRAW', title: \"免费抽奖\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"separator2\", type: \"separator\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t\tawait createContextMenu({ id: \"LOGOUT\", title: \"登出\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t} else {\r\n\t\tawait createContextMenu({ id: \"OPEN_JUEJIN\", type: \"normal\", title: `掘金首页`, contexts: [\"all\"] });\r\n\t}\r\n\tresetContextMenusIng = false;\r\n};\r\n\r\n/*\r\n*  菜单被点击\r\n* */\r\nexport const contextMenusOnClick = async (info, tab) => {\r\n\tlet user = await getSelfStorage();\r\n\tlet { menuItemId } = info;\r\n\tlet { windowId } = tab;\r\n\tif (menuItemId === \"OPEN_JUEJIN\") { // 打开掘金\r\n\t\tcreateTab({ url: `https://juejin.cn/`, selected: true, windowId })\r\n\t}\r\n\tif (menuItemId === \"SELF_HOME\") { // 我的主页\r\n\t\tawait createTab({ url: `https://juejin.cn/user/${user.user_basic.user_id}`, selected: true, windowId })\r\n\t}\r\n\tif (menuItemId === \"SELF_NOTIFICATION\") { // 我的消息\r\n\t\tawait createTab({ url: `https://juejin.cn/notification`, selected: true, windowId })\r\n\t}\r\n\tif (menuItemId === \"LOGOUT\") { // 登出\r\n\t\tawait logout();\r\n\t}\r\n\tif (menuItemId === \"SIGN_IN\") { // 签到\r\n\t\tawait signin();\r\n\t}\r\n\tif (menuItemId === \"BUG_FIX\") { // fixbug\r\n\t\tawait bugfix();\r\n\t}\r\n\tif (menuItemId === 'FREE_LUCKY_DRAW') { // 免费抽奖\r\n\t\tawait freeLucky()\r\n\t}\r\n};","// 消息相关\r\n\r\nimport { getSelfStorage, getYearDynamic } from \"./user\";\r\nimport { getPinClubInfo, getUserPins, removePin, getPinClubWeekUserRank, getUserZanPins, cancelZanPin } from \"./pin\";\r\n\r\n// 事件处理map\r\nconst eventHandleMap = {\r\n\t'get-self-info': () => getSelfStorage(),\t// 获取个人信息\r\n\t'get-user-pins': (userId) => getUserPins(userId), // 获取用户沸点列表\r\n\t'remove-pin': (pin) => removePin(pin), // 删除沸点\r\n\t'get-pin-club-info': (clubId) => getPinClubInfo(clubId),\t// 获取沸点圈子详情\r\n\t'get-pin-club-week-user-rank': (clubId) => getPinClubWeekUserRank(clubId), //获取圈子一周废物榜\r\n\t'get-user-zan-pins': (userId) => getUserZanPins(userId), // 获取用户点赞列表\r\n\t'cancel-zan-pin': (pin) => cancelZanPin(pin), // 取消沸点点赞\r\n\t'get-year-dynamic': (userId) => getYearDynamic(userId)\r\n}\r\n\r\nconst handleOnMessage = async (event, data, callback) => {\r\n\tcallback(await eventHandleMap[event](data));\r\n}\r\n\r\n/*\r\n* 当页面发来了消息\r\n* */\r\nexport const runtimeOnMessage = (request, sender, sendResponse) => {\r\n\tlet { to, event, data } = request;\r\n\tif (to !== 'background') return;\r\n\thandleOnMessage(event, data, sendResponse)\r\n\treturn true\r\n}","// 沸点相关\r\nimport { getShortMsgList, removeShortMsg } from \"../../../api/content\";\r\nimport { queryTopicDetail } from \"../../../api/tag\";\r\nimport { getTopicShortMsgList } from \"../../../api/recommend\";\r\nimport { getStorage, sendBasicNotifications, setStorage } from \"../chrome\";\r\nimport { getUserInfo } from \"./user\";\r\nimport { dayjs, uuid } from \"../../../tool\";\r\nimport { cancelDigg, diggQueryPage } from \"../../../api/interact\";\r\nimport { handleApiResult } from \"../../../api\";\r\n\r\n/*\r\n* 获取用户沸点列表\r\n* */\r\nexport const getUserPins = async (userId) => {\r\n\t// 先获取数量\r\n\tlet res = await getShortMsgList({ userId, limit: 1 });\r\n\tif (!res.success) return [];\r\n\tres = await getShortMsgList({ userId, limit: res.count });\r\n\treturn res.success ? res.data : []\r\n}\r\n\r\n/*\r\n* 删除沸点\r\n* */\r\nexport const removePin = async (pin) => {\r\n\tlet { success } = await removeShortMsg(pin.msg_id);\r\n\treturn success\r\n}\r\n\r\n/*\r\n* 获取用户点赞列表\r\n* */\r\nexport const getUserZanPins = async (userId) => {\r\n\tlet { success, data, count } = await diggQueryPage({ user_id: userId, item_type: 4 });\r\n\treturn success ? { pins: data, count: count } : { pins: [], count: 0 }\r\n}\r\n\r\n/*\r\n* 取消点赞\r\n* */\r\nexport const cancelZanPin = async (pin) => {\r\n\tlet { success } = await cancelDigg(pin.msg_id, 4);\r\n\treturn success;\r\n}\r\n\r\n/*\r\n* 获取圈子详情\r\n* 缓存7天\r\n* */\r\nexport const getPinClubInfo = async (clubId) => {\r\n\tlet storageKey = `pin-club-info-${clubId}`;\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage) return storage;\r\n\tlet { success, data } = await queryTopicDetail(clubId);\r\n\tif (!success) return null\r\n\tawait setStorage(storageKey, data, 60 * 24 * 7);\r\n\treturn data\r\n}\r\n\r\n/*\r\n* 获取圈子一周废物榜\r\n* 缓存10分钟\r\n* */\r\nexport const getPinClubWeekUserRank = async (clubId) => {\r\n\tlet storageKey = `pin-club-week-user-rank-${clubId}`;\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage) return storage;\r\n\tstorage = { time: dayjs().format('YYYY-MM-DD HH:mm:ss'), rank: [] }\r\n\tlet { success, data } = await getTopicShortMsgList({ topic_id: clubId, limit: 1000 })\r\n\tif (!success) return storage\r\n\tlet userMap = {};\r\n\tlet targetTime = dayjs().startOf('week').valueOf();\r\n\tfor (let msg of data) {\r\n\t\tif (msg.msg_Info.ctime * 1000 < targetTime) break;\r\n\t\tlet { user_id } = msg.msg_Info;\r\n\t\tuserMap[user_id] ? userMap[user_id].push(msg) : userMap[user_id] = [msg];\r\n\t}\r\n\tlet users = [];\r\n\tfor (let userId in userMap) {\r\n\t\tusers.push({ userId, msgs: userMap[userId] });\r\n\t}\r\n\tusers.sort((a, b) => b.msgs.length - a.msgs.length);\r\n\tlet rank = [];\r\n\tlet userIds = [];\r\n\tfor (let user of users) {\r\n\t\tif (!rank.length) {\r\n\t\t\tuserIds.push(user.userId);\r\n\t\t\trank.push({ msgCount: user.msgs.length, users: [user] });\r\n\t\t} else {\r\n\t\t\tlet { msgCount, users } = rank[rank.length - 1];\r\n\t\t\tif (user.msgs.length === msgCount) {\r\n\t\t\t\tuserIds.push(user.userId);\r\n\t\t\t\tusers.push(user);\r\n\t\t\t} else {\r\n\t\t\t\tif (rank.length < 3) {\r\n\t\t\t\t\tuserIds.push(user.userId);\r\n\t\t\t\t\trank.push({ msgCount: user.msgs.length, users: [user] });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tlet userList = await Promise.all(userIds.map(userId => getUserInfo(userId)));\r\n\tuserMap = {};\r\n\tfor (let user of userList) {\r\n\t\tuserMap[user.user_id] = user;\r\n\t}\r\n\trank.forEach(r => {\r\n\t\tr.users.forEach(user => {\r\n\t\t\tuser.userInfo = userMap[user.userId];\r\n\t\t});\r\n\t});\r\n\tstorage.rank = rank;\r\n\tawait setStorage(storageKey, storage, 10);\r\n\treturn storage\r\n}\r\n\r\n\r\n/**\r\n * 随机发个沸点\r\n */\r\nexport const sendARandomPin = async () => {\r\n  let todayText = dayjs(new Date()).format(\"YYYYMMDD\");\r\n\r\n  let todayInfosResp = await fetch(\r\n    `https://www.mxnzp.com/api/holiday/single/${todayText}?ignoreHoliday=false&app_id=nhhhdemgpmhixsnv&app_secret=Y296dDlVdVVhRnhucmJmUnhvRVY2UT09`,\r\n    {\r\n      credentials: \"include\",\r\n      method: \"GET\",\r\n      crossorigin: true,\r\n    }\r\n  );\r\n\r\n  let todayInfosBodyJson = await todayInfosResp.json();\r\n  let todayInfoRes = todayInfosBodyJson?.data || {};\r\n  let weekdayTranslateMap = {1: \"周一\", 2: \"周二\", 3: \"周三\", 4: \"周四\", 5: \"周五\", 6: \"周六\", 7: \"周日\"};\r\n  let todayInfos = `今日为${weekdayTranslateMap[todayInfoRes.weekDay] + \" \" + todayInfoRes.typeDes}, 阴历: ${todayInfoRes.lunarCalendar}, \r\n  \t宜: ${todayInfoRes.suit}, 忌: ${todayInfoRes.avoid}`;\r\n\r\n  const getWellKnownWords = () => {\r\n    return new Promise((resolve, reject) => {\r\n\t  ///加个延时, 防止接口并发超了\r\n      setTimeout(() => {\r\n        fetch(\r\n          \"https://www.mxnzp.com/api/daily_word/recommend?count=1&app_id=nhhhdemgpmhixsnv&app_secret=Y296dDlVdVVhRnhucmJmUnhvRVY2UT09\",\r\n          {\r\n            credentials: \"include\",\r\n            method: \"GET\",\r\n            crossorigin: true,\r\n          }\r\n        ).then((wellKnownWordResp) => {\r\n          wellKnownWordResp.json().then((wellKnownWordBodyJson) => {\r\n            let wellKnownWords = wellKnownWordBodyJson?.data?.[0].content || \"就不给你看~~\";\r\n            resolve(wellKnownWords);\r\n          });\r\n        });\r\n      }, 3000);\r\n    });\r\n  };\r\n\r\n  let wellKnownWords = await getWellKnownWords();\r\n  let pinContent = wellKnownWords + \"\\n\\n\" + todayInfos;\r\n\r\n  /// topic id默认指向 '摸鱼一下' 话题\r\n  let topicId = window.location.pathname.match(/\\d+/g)?.[0] || '6824710203301167112';\r\n  let res = await fetch(\r\n    `https://api.juejin.cn/content_api/v1/short_msg/publish?aid=2608&uuid=${uuid()}&spider=0`,\r\n    {\r\n      credentials: \"include\",\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        content: pinContent,\r\n        sync_to_org: false,\r\n        topic_id: topicId,\r\n      }),\r\n    }\r\n  ).then((res) => res.json());\r\n\r\n//   let { success, data, err_msg } = handleApiResult(res);\r\n//   sendBasicNotifications(\"发个沸点：\" + (success ? \"成功\" : \"失败\"), \"^_^\");\r\n};","import { resetSelf } from \"./user\";\r\nimport { resetContextMenus } from \"./contextMenus\";\r\nimport { sendMessageToTab } from \"../chrome\";\r\n/*\r\n* 当标签页发生变化\r\n* */\r\n\r\nexport const tabOnUpdate = async (tabId, changeInfo, tab) => {\r\n\t// 是否完毕\r\n\tif (changeInfo.status !== \"complete\") return;\r\n\t// 是否是掘金的标签页\r\n\tlet isJueJin = tab.url.includes('juejin.cn');\r\n\tif (isJueJin) await resetSelf()\r\n\tawait resetContextMenus();\r\n\tif (isJueJin) sendMessageToTab(tabId, { event: \"page-change-complete\" })\r\n}","// 用户相关\r\nimport {\r\n\tcheckIn,\r\n\tcollectBug,\r\n\tdrawLottery,\r\n\tgetLotteryConfig,\r\n\tgetNotCollectBug, getSelfInfo,\r\n\tlogout as apiLogout,\r\n\tgetUserInfo as apiGetUserInfo, getDynamic,\r\n} from \"../../../api/user\";\r\nimport { getStorage, queryTabs, sendBasicNotifications, setStorage, updateTab } from \"../chrome\";\r\nimport { resetContextMenus } from \"./contextMenus\";\r\nimport { getNotReadMessageCount } from \"../../../api/message\";\r\nimport { dayjs } from \"../../../tool\";\r\n\r\n/*\r\n* 获取登录用户缓存\r\n* */\r\nexport const getSelfStorage = async () => {\r\n\treturn await getStorage('self-info')\r\n}\r\n\r\n/*\r\n* 设置登录用户缓存\r\n* */\r\nexport const setSelfStorage = async (storage) => {\r\n\tawait setStorage('self-info', storage)\r\n}\r\n\r\n/*重置用户信息*/\r\nexport const resetSelf = async () => {\r\n\tlet { success, data } = await getSelfInfo();\r\n\tif (!success) return setSelfStorage(null);\r\n\tawait setSelfStorage(data);\r\n\treturn data\r\n}\r\n\r\n/*\r\n* 获取用户信息\r\n* 缓存1天\r\n* */\r\nexport const getUserInfo = async (userId) => {\r\n\tlet storageKey = `user-info-${userId}`\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage) return storage;\r\n\tlet { success, data } = await apiGetUserInfo(userId);\r\n\tif (!success) return null;\r\n\tawait setStorage(storageKey, data, 60 * 24);\r\n\treturn data;\r\n}\r\n\r\n/*\r\n* 获取年度用户动态列表\r\n* */\r\nexport const getYearDynamic = async (userId) => {\r\n\tlet storageKey = `year-dynamic-${userId}`;\r\n\t// 先获取总数\r\n\tlet { success, data } = await getDynamic(userId, 0);\r\n\tif (!success) return []\r\n\t// count是动态总数\r\n\tlet { count, list } = data;\r\n\t// 获取缓存\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage && storage.count === count) return storage.info;\r\n\tstorage = { count: count, info: {} };\r\n\tlet dynamics = [...list];\r\n\t// 每份20个\r\n\tlet cursors = new Array(Math.ceil(count / 20)).fill(null).map((item, index) => 20 * index);\r\n\t// 第一个已经获取过，移除\r\n\tcursors.shift();\r\n\t// 开始并发请求\r\n\tlet dynamicsRes = await Promise.all(cursors.map(cursor => getDynamic(userId, cursor)));\r\n\tdynamicsRes.forEach(dynamicRes => {\r\n\t\tif (dynamicRes.success) {\r\n\t\t\tdynamics.push(...dynamicRes.data.list);\r\n\t\t}\r\n\t})\r\n\t// 开始处理数据\r\n\tfor (let dynamic of dynamics) {\r\n\t\tlet year = dayjs(dynamic.time * 1000).format('YYYY')\r\n\t\tlet date = dayjs(dynamic.time * 1000).format('MM-DD');\r\n\t\tif (storage.info[year]) {\r\n\t\t\tif (storage.info[year][date]) {\r\n\t\t\t\tstorage.info[year][date].push(dynamic.action)\r\n\t\t\t} else {\r\n\t\t\t\tstorage.info[year][date] = [dynamic.action]\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstorage.info[year] = { [date]: [dynamic.action] }\r\n\t\t}\r\n\t}\r\n\tawait setStorage(storageKey, storage, 60 * 24);\r\n\treturn storage.info;\r\n}\r\n\r\n/*\r\n* 开始循环获取未读消息数\r\n* */\r\nexport const loopNotReadMessageCount = () => {\r\n\tsetInterval(async () => {\r\n\t\tif (await getSelfStorage()) {\r\n\t\t\tlet { success, data } = await getNotReadMessageCount();\r\n\t\t\tif (!success) return;\r\n\t\t\t// count[1]：点赞和收藏  count[3]：评论\r\n\t\t\tlet { count, total } = data;\r\n\t\t\tlet items = [];\r\n\t\t\tif (count[1]) items.push(`点赞和收藏：${count[1]}条`);\r\n\t\t\tif (count[3]) items.push(`评论：${count[3]}条`);\r\n\t\t\tlet notReadStrStorage = await getStorage(\"message-not-read\");\r\n\t\t\t// 有未读且详情文字不相同\r\n\t\t\tif (total && notReadStrStorage !== JSON.stringify(items)) {\r\n\t\t\t\tsendBasicNotifications(`您有${total}条掘金未读消息，以下为详细内容`, `${items.join('\\n')}`);\r\n\t\t\t}\r\n\t\t\tawait setStorage(\"message-not-read\", JSON.stringify(items));\r\n\t\t}\r\n\t}, 1000 * 60)\r\n}\r\n\r\n/*\r\n* 用户登出\r\n* 登出后刷新所有相关页面\r\n* */\r\nexport const logout = async () => {\r\n\tapiLogout();\r\n\t// 获取所有掘金相关页面\r\n\tlet tabs = await queryTabs({ url: 'https://juejin.cn/*' });\r\n\t// 将登录用户缓存清空\r\n\tawait setSelfStorage(null);\r\n\t// 重置菜单\r\n\tawait resetContextMenus();\r\n\t// 刷新页面\r\n\tfor (let tab of tabs) {\r\n\t\tupdateTab(tab.id, { url: tab.url });\r\n\t}\r\n}\r\n\r\n/*\r\n* 用户签到\r\n* */\r\nexport const signin = async () => {\r\n\tlet { success, data, err_msg } = await checkIn();\r\n\tsendBasicNotifications(\"掘金签到：\" + (success ? \"成功\" : \"失败\"), success ? `本次新增矿石：${data.incr_point}，当前矿石：${data.sum_point}` : err_msg)\r\n}\r\n\r\n/*\r\n* 修复bug\r\n* */\r\nexport const bugfix = async () => {\r\n\t// 获取未修复bug\r\n\tlet { success, data, err_msg } = await getNotCollectBug();\r\n\tsendBasicNotifications(\"掘金BugFix：\" + (success ? \"成功\" : \"失败\"), success ? `今日掘金bugfix：${data.length}` : err_msg)\r\n\tif (!success) return;\r\n\t// 开始修复bug\r\n\tdata.forEach(bug => collectBug(bug))\r\n}\r\n\r\n/*\r\n* 抽奖\r\n* */\r\nexport const freeLucky = async () => {\r\n\t// 获取今日免费抽奖次数\r\n\tlet res = await getLotteryConfig()\r\n\tif (!res.success) return sendBasicNotifications('今日免费抽奖失败', res.err_msg);\r\n\tif (!res.data.free_count) return sendBasicNotifications('今日免费抽奖失败', '今日免费抽奖次数已经用完');\r\n\t// 开始抽奖\r\n\tres = await drawLottery()\r\n\tif (!res.success) return sendBasicNotifications('今日免费抽奖失败', res.err_msg);\r\n\tsendBasicNotifications('今日免费抽奖成功', `恭喜抽到：${res.data.lottery_name}`);\r\n}","import Dayjs from 'dayjs';\r\nimport weekday from \"dayjs/plugin/weekday\";\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport \"dayjs/locale/zh-cn\";\r\n\r\nDayjs.extend(weekday);\r\nDayjs.extend(relativeTime);\r\nDayjs.locale('zh-cn')\r\n\r\nexport const dayjs = Dayjs;\r\n\r\n/*\r\n* 获取uuid\r\n* */\r\nexport const uuid = () => {\r\n\tvar s = [];\r\n\tvar hexDigits = \"0123456789abcdef\";\r\n\tfor (var i = 0; i < 36; i++) {\r\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n\t}\r\n\ts[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\r\n\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n\ts[8] = s[13] = s[18] = s[23] = \"-\";\r\n\r\n\tvar uuid = s.join(\"\");\r\n\treturn uuid;\r\n}\r\n\r\n/*\r\n* 睡眠函数\r\n* */\r\nexport const sleep = (x) => {\r\n\treturn new Promise(res => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tres();\r\n\t\t}, x * 1000)\r\n\t})\r\n}\r\n\r\n/*\r\n* 获取掘金动态分数计算\r\n* 0：发布文章\r\n* 1：点赞文章\r\n* 2：发布沸点\r\n* 3：点赞沸点\r\n* 4、关注用户\r\n* 5、关注标签\r\n* */\r\nexport const getDynamicScoreByActions = (actions) => {\r\n\tif (!actions.length) return 0\r\n\tlet score = 0;\r\n\tactions.forEach(action => {\r\n\t\tif (action === 0) score += 70;\r\n\t\tif (action === 1) score += 20;\r\n\t\tif (action === 2) score += 10;\r\n\t\tif (action === 3) score += 5;\r\n\t\tif (action === 4) score += 10;\r\n\t})\r\n\t// 活跃度等级\r\n\t// Lv0 —— 活跃度 0\r\n\t// Lv1 —— 活跃度 [1, 20)\r\n\t// Lv2 —— 活跃度 [20, 60)\r\n\t// Lv3 —— 活跃度 [60, 80)\r\n\t// Lv4 —— 活跃度 [80, 100)\r\n\treturn Math.min(score, 100);\r\n}\r\n\r\nexport const getDynamicActionsCount = actions => {\r\n\tif (!actions.length) return {};\r\n\tlet count = {};\r\n\tactions.forEach(action => {\r\n\t\tcount[action] ? count[action]++ : count[action] = 1;\r\n\t})\r\n\treturn count;\r\n}\r\n\r\n\r\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=v;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),l=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?l(1,0):l(31,11);case f:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,l=this;r=Number(r);var $=O.p(h),y=function(t){var e=w(l);return O.w(e.date(e.date()+Math.round(t*r)),l)};if($===f)return this.set(f,this.$M+r);if($===c)return this.set(c,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},$={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||$[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,v=this-M,g=O.m(this,M);return g=($={},$[c]=g/12,$[f]=g,$[h]=g/3,$[o]=(v-m)/6048e5,$[a]=(v-m)/864e5,$[u]=v/n,$[s]=v/e,$[i]=v/t,$)[y]||v,l?g:O.a(g)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[g],w.Ls=D,w.p={},w}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_zh_cn=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=_(e),d={name:\"zh-cn\",weekdays:\"星期日_星期一_星期二_星期三_星期四_星期五_星期六\".split(\"_\"),weekdaysShort:\"周日_周一_周二_周三_周四_周五_周六\".split(\"_\"),weekdaysMin:\"日_一_二_三_四_五_六\".split(\"_\"),months:\"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月\".split(\"_\"),monthsShort:\"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月\".split(\"_\"),ordinal:function(e,_){return\"W\"===_?e+\"周\":e+\"日\"},weekStart:1,yearStart:4,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY/MM/DD\",LL:\"YYYY年M月D日\",LLL:\"YYYY年M月D日Ah点mm分\",LLLL:\"YYYY年M月D日ddddAh点mm分\",l:\"YYYY/M/D\",ll:\"YYYY年M月D日\",lll:\"YYYY年M月D日 HH:mm\",llll:\"YYYY年M月D日dddd HH:mm\"},relativeTime:{future:\"%s内\",past:\"%s前\",s:\"几秒\",m:\"1 分钟\",mm:\"%d 分钟\",h:\"1 小时\",hh:\"%d 小时\",d:\"1 天\",dd:\"%d 天\",M:\"1 个月\",MM:\"%d 个月\",y:\"1 年\",yy:\"%d 年\"},meridiem:function(e,_){var t=100*e+_;return t<600?\"凌晨\":t<900?\"早上\":t<1100?\"上午\":t<1300?\"中午\":t<1800?\"下午\":\"晚上\"}};return t.default.locale(d,null,!0),d}));","!function(r,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(r=\"undefined\"!=typeof globalThis?globalThis:r||self).dayjs_plugin_relativeTime=e()}(this,(function(){\"use strict\";return function(r,e,t){r=r||{};var n=e.prototype,o={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};function i(r,e,t,o){return n.fromToBase(r,e,t,o)}t.en.relativeTime=o,n.fromToBase=function(e,n,i,d,u){for(var f,a,s,l=i.$locale().relativeTime||o,h=r.thresholds||[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],m=h.length,c=0;c<m;c+=1){var y=h[c];y.d&&(f=d?t(e).diff(i,y.d,!0):i.diff(e,y.d,!0));var p=(r.rounding||Math.round)(Math.abs(f));if(s=f>0,p<=y.r||!y.r){p<=1&&c>0&&(y=h[c-1]);var v=l[y.l];u&&(p=u(\"\"+p)),a=\"string\"==typeof v?v.replace(\"%d\",p):v(p,n,y.l,s);break}}if(n)return a;var M=s?l.future:l.past;return\"function\"==typeof M?M(a):M.replace(\"%s\",a)},n.to=function(r,e){return i(r,e,this,!0)},n.from=function(r,e){return i(r,e,this)};var d=function(r){return r.$u?t.utc():t()};n.toNow=function(r){return this.to(d(this),r)},n.fromNow=function(r){return this.from(d(this),r)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekday=t()}(this,(function(){\"use strict\";return function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,i=this.$W,n=(i<t?i+7:i)-t;return this.$utils().u(e)?n:this.subtract(n,\"day\").add(e,\"day\")}}}));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { resetSelf, loopNotReadMessageCount } from \"./controller/user\";\r\nimport { contextMenusOnClick, resetContextMenus } from \"./controller/contextMenus\";\r\nimport { tabOnUpdate } from \"./controller/tabs\";\r\nimport { runtimeOnMessage } from \"./controller/message\";\r\n\r\n// chrome.storage.local.clear();\r\nchrome.contextMenus.onClicked.addListener(contextMenusOnClick);\r\nchrome.tabs.onUpdated.addListener(tabOnUpdate);\r\nchrome.runtime.onMessage.addListener(runtimeOnMessage)\r\n\r\nconst init = async () => {\r\n\t// 重新获取用户信息\r\n\tawait resetSelf()\r\n\t// 重置按钮组\r\n\tawait resetContextMenus();\r\n\t// 开始循环获取未读消息数量\r\n\tloopNotReadMessageCount();\r\n};\r\n\r\ninit();\r\n"],"names":["ajax","removeShortMsg","msgId","url","method","data","msg_id","getShortMsgList","userId","cursor","sortType","limit","user_id","toString","sort_type","headers","res","fetch","body","JSON","stringify","credentials","then","json","handleApiResult","apiRes","Object","assign","success","err_no","diggQueryPage","item_type","cancelDigg","itemId","itemType","item_id","getNotReadMessageCount","getTopicShortMsgList","topic_id","id_type","queryTopicDetail","topicId","logout","getSelfInfo","pack_req","user_counter","user_growth_info","user","getUserInfo","checkIn","getNotCollectBug","collectBug","bug","getLotteryConfig","drawLottery","getDynamic","iconUrl","dayjs","config","uuid","setStorage","key","value","minute","setTime","format","overdueTime","undefined","add","storage","chrome","local","set","getStorage","get","isBefore","sendBasicNotifications","title","message","notifications","getPermissionLevel","level","create","type","createTab","tab","tabs","queryTabs","search","query","updateTab","tabId","update","sendMessageToTab","info","sendMessage","from","createContextMenu","menu","console","log","contextMenus","removeAllContextMenus","removeAll","getSelfStorage","signin","bugfix","freeLucky","resetContextMenusIng","resetContextMenus","id","user_basic","user_name","contexts","parentId","contextMenusOnClick","menuItemId","windowId","selected","getYearDynamic","getPinClubInfo","getUserPins","removePin","getPinClubWeekUserRank","getUserZanPins","cancelZanPin","eventHandleMap","get-self-info","pin","clubId","handleOnMessage","event","callback","runtimeOnMessage","request","sender","sendResponse","to","count","pins","storageKey","time","rank","userMap","targetTime","startOf","valueOf","msg","msg_Info","ctime","push","users","msgs","sort","a","b","length","userIds","msgCount","userList","Promise","all","map","forEach","r","userInfo","sendARandomPin","todayText","Date","todayInfosResp","crossorigin","todayInfosBodyJson","todayInfoRes","weekdayTranslateMap","todayInfos","weekDay","typeDes","lunarCalendar","suit","avoid","getWellKnownWords","resolve","reject","setTimeout","wellKnownWordResp","wellKnownWordBodyJson","wellKnownWords","content","pinContent","window","location","pathname","match","sync_to_org","resetSelf","tabOnUpdate","changeInfo","status","isJueJin","includes","apiLogout","apiGetUserInfo","setSelfStorage","list","dynamics","cursors","Array","Math","ceil","fill","item","index","shift","dynamicsRes","dynamicRes","dynamic","year","date","action","loopNotReadMessageCount","setInterval","total","items","notReadStrStorage","join","err_msg","incr_point","sum_point","free_count","lottery_name","Dayjs","weekday","relativeTime","extend","locale","s","hexDigits","i","substr","floor","random","sleep","x","getDynamicScoreByActions","actions","score","min","getDynamicActionsCount","onClicked","addListener","onUpdated","runtime","onMessage","init"],"sourceRoot":""}