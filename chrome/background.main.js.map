{"version":3,"file":"background.main.js","mappings":"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","sources":["webpack://juejin-plugin/./src/config/index.ts","webpack://juejin-plugin/./src/pages/background/auth.js","webpack://juejin-plugin/./src/pages/background/contextMenus.js","webpack://juejin-plugin/./src/pages/background/storage.js","webpack://juejin-plugin/./src/pages/background/tabs.js","webpack://juejin-plugin/./src/pages/background/tool.js","webpack://juejin-plugin/webpack/bootstrap","webpack://juejin-plugin/webpack/runtime/define property getters","webpack://juejin-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://juejin-plugin/webpack/runtime/make namespace object","webpack://juejin-plugin/./src/pages/background/index.js"],"sourcesContent":["export default {\n  iconUrl: \"static/img/icon.png\"\n};\n","import { resetContextMenus } from \"./contextMenus\";\nimport { handleApiResult, getAllJueJinTabs, uuid, sleep } from \"./tool\";\nimport { getStorage, setStorage } from \"./storage\";\nimport config from \"../../config\";\n\n// 获取个人信息缓存\nexport const getSelfInfoStorage = async () => {\n\treturn await getStorage(\"juejin-self\");\n};\n\n// 设置个人信息缓存\nexport const setSelfInfoStorage = async (selfInfo) => {\n\tawait setStorage(\"juejin-self\", selfInfo);\n};\n\n// 获取未读消息数\nexport const loopMessageNotReadCount = async () => {\n\tif (await getSelfInfoStorage()) {\n\t\tlet res = await fetch(\"https://api.juejin.cn/interact_api/v1/message/count\", {\n\t\t\tcredentials: 'include',\n\t\t}).then(res => res.json());\n\t\tlet { success, data } = handleApiResult(res);\n\t\tif (success) {\n\t\t\t// count[1]：点赞和收藏\n\t\t\tlet { count, total } = data;\n\t\t\tlet countStorage = await getStorage(\"message-not-read-count\");\n\t\t\t// 有未读\n\t\t\tif (total && total !== countStorage) {\n\t\t\t\tchrome.notifications.create(uuid(), {\n\t\t\t\t\ttype: \"basic\",\n\t\t\t\t\ttitle: \"掘金未读消息通知\",\n\t\t\t\t\tmessage: `您有${total}条新消息，快去掘金查看吧`,\n\t\t\t\t\ticonUrl: \"/icons/logo.png\"\n\t\t\t\t});\n\t\t\t}\n\t\t\tawait setStorage(\"message-not-read-count\", total);\n\t\t}\n\t}\n\tawait sleep(10);\n\tloopMessageNotReadCount();\n};\n\n// 登出\nexport const logout = async () => {\n\tawait fetch(\"https://juejin.cn/passport/web/logout/\", {\n\t\tcredentials: 'include',\n\t});\n\t// 取出所有打开的掘金tab\n\tlet tabs = await getAllJueJinTabs();\n\tfor (let tab of tabs) {   // 刷新当前页\n\t\tawait chrome.tabs.update(tab.id, { url: tab.url });\n\t}\n\tawait setSelfInfoStorage(null);\n\tawait resetContextMenus();\n};\n\n// 获取用户信息\nexport const getUserInfo = async (userId) => {\n\tlet res = await fetch(`https://api.juejin.cn/user_api/v1/user/get?user_id=${userId}`, {\n\t\tcredentials: 'include',\n\t}).then(res => res.json());\n\tlet { success, data } = handleApiResult(res);\n\treturn success ? data : null;\n};\n\n// 更新登录人信息\nexport const resetSelfInfo = async () => {\n\tlet res = await fetch(\"https://api.juejin.cn/user_api/v1/user/get_info_pack\",\n\t\t{\n\t\t\tcredentials: 'include',\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ \"pack_req\": { \"user_counter\": true, \"user_growth_info\": true, \"user\": true } })\n\t\t}).then(res => res.json());\n\tlet { data: userInfo } = handleApiResult(res);\n\tif (!userInfo) return await setSelfInfoStorage(null);\n\tawait setSelfInfoStorage(userInfo);\n\treturn userInfo;\n};\n\n// 签到\nexport const signin = async () => {\n\tlet res = await fetch(\"https://api.juejin.cn/growth_api/v1/check_in\", {\n\t\tcredentials: 'include',\n\t\tmethod: \"POST\"\n\t}).then(res => res.json());\n\tlet { success, data, err_msg } = handleApiResult(res);\n\tchrome.notifications.create(uuid(), {\n\t\ttype: \"basic\",\n\t\ttitle: \"掘金签到：\" + (success ? \"成功\" : \"失败\"),\n\t\tmessage: success ? `本次新增矿石：${data.incr_point}，当前矿石：${data.sum_point}` : err_msg,\n\t\ticonUrl: config.iconUrl\n\t});\n};\n\n// 收集bug\nexport const bugfix = async () => {\n\tlet res = await fetch(\"https://api.juejin.cn/user_api/v1/bugfix/not_collect\", {\n\t\tcredentials: 'include',\n\t\tmethod: \"POST\"\n\t}).then(res => res.json());\n\tlet { success, data, err_msg } = handleApiResult(res);\n\tchrome.notifications.create(uuid(), {\n\t\ttype: \"basic\",\n\t\ttitle: \"掘金BugFix：\" + (success ? \"成功\" : \"失败\"),\n\t\tmessage: success ? `今日掘金bugfix：${data.length}` : err_msg,\n\t\ticonUrl: config.iconUrl\n\t});\n\tif (!success) return;\n\tdata.forEach(bug => {\n\t\tfetch(\"https://api.juejin.cn/user_api/v1/bugfix/collect\", {\n\t\t\tcredentials: 'include',\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify(bug)\n\t\t});\n\t});\n};\n\nexport const initAuth = async () => {\n\tawait resetSelfInfo();\n\tloopMessageNotReadCount();\n};\n","import { getSelfInfoStorage, logout, signin, bugfix } from \"./auth\";\n\nexport const initContentMenus = async () => {\n  await resetContextMenus();\n};\n\n\nlet resetContextMenusIng = false;\n\nexport const resetContextMenus = async () => {\n  if (resetContextMenusIng) return;\n  resetContextMenusIng = true;\n  // 移除所有菜单先\n  await chrome.contextMenus.removeAll();\n  // 获取用户信息\n  let self = await getSelfInfoStorage();\n  // 已登录\n  if (self) {\n    await chrome.contextMenus.create({\n      id: \"MENU_PARENT\",\n      title: `${self.user_basic.user_name}的掘金`,\n      contexts: [\"all\"]\n    });\n    await chrome.contextMenus.create({\n      id: \"SELF_HOME\",\n      title: \"我的主页\",\n      parentId: \"MENU_PARENT\",\n      contexts: [\"all\"]\n    });\n    await chrome.contextMenus.create({\n      id: \"SELF_NOTIFICATION\",\n      title: \"我的消息\",\n      parentId: \"MENU_PARENT\",\n      contexts: [\"all\"]\n    });\n    await chrome.contextMenus.create({\n      id: \"separator1\",\n      type: \"separator\",\n      parentId: \"MENU_PARENT\",\n      contexts: [\"all\"]\n    });\n    await chrome.contextMenus.create({ id: \"SIGN_IN\", title: \"快速签到\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\n    await chrome.contextMenus.create({ id: \"BUG_FIX\", title: \"收集BUG\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\n    await chrome.contextMenus.create({\n      id: \"separator2\",\n      type: \"separator\",\n      parentId: \"MENU_PARENT\",\n      contexts: [\"all\"]\n    });\n    await chrome.contextMenus.create({ id: \"LOGOUT\", title: \"登出\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\n  } else {\n    await chrome.contextMenus.create({ id: \"OPEN_JUEJIN\", type: \"normal\", title: `掘金首页`, contexts: [\"all\"] });\n  }\n  resetContextMenusIng = false;\n};\n\nexport const onClick = async (info, tab) => {\n  let self = await getSelfInfoStorage();\n  let { windowId } = tab;\n  let { menuItemId } = info;\n  if (menuItemId === \"OPEN_JUEJIN\") { // 打开掘金\n    await chrome.tabs.create({ url: `https://juejin.cn/`, selected: true, windowId });\n  }\n  if (menuItemId === \"SELF_HOME\") { // 我的主页\n    await chrome.tabs.create({\n      url: `https://juejin.cn/user/${self.user_basic.user_id}`,\n      selected: true,\n      windowId\n    });\n  }\n  if (menuItemId === \"SELF_NOTIFICATION\") { // 我的消息\n    await chrome.tabs.create({ url: `https://juejin.cn/notification`, selected: true, windowId });\n  }\n  if (menuItemId === \"LOGOUT\") { // 登出\n    await logout();\n  }\n  if (menuItemId === \"SIGN_IN\") { // 签到\n    await signin();\n  }\n  if (menuItemId === \"BUG_FIX\") { // 收集bug\n    await bugfix();\n  }\n};\n","export const setStorage = async (key, value) => {\n    await chrome.storage.local.set({ [key]: value })\n}\n\nexport const getStorage = async (key) => {\n    return (await chrome.storage.local.get())[key];\n}","import { resetContextMenus } from \"./contextMenus\";\nimport { resetSelfInfo } from \"./auth\";\nimport { isJueJinByTab } from \"./tool\";\n\nexport const onUpdated = async (tabId, changeInfo, tab) => {\n  if (changeInfo.status !== \"complete\") return;\n  let isJueJin = isJueJinByTab(tab);\n  if (isJueJin) await resetSelfInfo();\n  await resetContextMenus();\n  if (isJueJin) await chrome.tabs.sendMessage(tab.id, { from: \"background\", event: \"page-change-complete\" });\n};\n","// 获取cookie\nexport const getCookie = async () => {\n\tlet cookies = await chrome.cookies.getAll({})\n\tlet arr = cookies.map(cookie => `${cookie.name}=${cookie.value}`);\n\treturn arr.join(';');\n}\n\nexport const handleApiResult = (apiRes) => {\n\treturn Object.assign({}, apiRes, { success: apiRes.err_no === 0 })\n}\n\nexport const getAllJueJinTabs = async () => {\n\treturn await chrome.tabs.query({ url: 'https://juejin.cn/*' });\n}\n\nexport const isJueJinByTab = (tab) => {\nreturn tab.url.includes('juejin.cn');\n}\n\nexport const sleep = (s) => {\n\treturn new Promise(res => {\n\t\tsetTimeout(res, s * 1000)\n\t})\n}\n\n// 获取本月月初时间戳\nexport const getCurrentMonthFirstTime = () => {\n\tvar data = new Date();\n\tdata.setDate(1);\n\tdata.setHours(0);\n\tdata.setSeconds(0);\n\tdata.setMinutes(0);\n\treturn data.getTime();\n}\n\n// 获取本周一时间戳\nexport const getCurrentWeekFirstTime = () => {\n\tconst now = new Date()\n\tconst nowTime = now.getTime()\n\t// getDay()返回0-6，其中0表示周日，需特殊处理\n\tconst day = now.getDay() > 0 ? now.getDay() : 7 // 表示当前是周几\n\tconst oneDayTime = 24 * 60 * 60 * 1000 // 一天的总ms\n\t// 本周一时间戳\n\tconst MondayTime = nowTime - (day - 1) * oneDayTime\n\t// 格式化时间\n\tconst monday = new Date(MondayTime);\n\tmonday.setHours(0);\n\tmonday.setSeconds(0);\n\tmonday.setMinutes(0);\n\treturn monday.getTime();\n}\n\n\nexport const uuid = () => {\n\tvar s = [];\n\tvar hexDigits = \"0123456789abcdef\";\n\tfor (var i = 0; i < 36; i++) {\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n\t}\n\ts[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n\ts[8] = s[13] = s[18] = s[23] = \"-\";\n\n\tvar uuid = s.join(\"\");\n\treturn uuid;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { initAuth } from \"./auth.js\";\nimport { initContentMenus, onClick } from \"./contextMenus.js\";\nimport { onUpdated } from \"./tabs.js\";\n\n\nchrome.contextMenus.onClicked.addListener(onClick);\nchrome.tabs.onUpdated.addListener(onUpdated);\n\nconst init = async () => {\n  await initAuth();\n  await initContentMenus();\n};\n\ninit();\n"],"names":["iconUrl","resetContextMenus","handleApiResult","getAllJueJinTabs","uuid","sleep","getStorage","setStorage","config","getSelfInfoStorage","setSelfInfoStorage","selfInfo","loopMessageNotReadCount","res","fetch","credentials","then","json","success","data","count","total","countStorage","chrome","notifications","create","type","title","message","logout","tabs","tab","update","id","url","getUserInfo","userId","resetSelfInfo","method","headers","body","JSON","stringify","userInfo","signin","err_msg","incr_point","sum_point","bugfix","length","forEach","bug","initAuth","initContentMenus","resetContextMenusIng","contextMenus","removeAll","self","user_basic","user_name","contexts","parentId","onClick","info","windowId","menuItemId","selected","user_id","key","value","storage","local","set","get","isJueJinByTab","onUpdated","tabId","changeInfo","status","isJueJin","sendMessage","from","event","getCookie","cookies","getAll","arr","map","cookie","name","join","apiRes","Object","assign","err_no","query","includes","s","Promise","setTimeout","getCurrentMonthFirstTime","Date","setDate","setHours","setSeconds","setMinutes","getTime","getCurrentWeekFirstTime","now","nowTime","day","getDay","oneDayTime","MondayTime","monday","hexDigits","i","substr","Math","floor","random","onClicked","addListener","init"],"sourceRoot":""}