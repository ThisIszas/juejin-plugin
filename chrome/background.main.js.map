{"version":3,"file":"background.main.js","mappings":"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","sources":["webpack://juejin-plugin/./src/pages/background/contextMenus.js","webpack://juejin-plugin/./src/pages/background/tool.js","webpack://juejin-plugin/./src/pages/background/storage.js","webpack://juejin-plugin/./src/pages/background/message.js","webpack://juejin-plugin/./src/config/index.ts","webpack://juejin-plugin/./src/pages/background/auth.js","webpack://juejin-plugin/./src/pages/background/index.js","webpack://juejin-plugin/./src/pages/background/tabs.js"],"sourcesContent":["import { getSelfInfoStorage, logout, signin, bugfix, freeLuckyDraw } from \"./auth\";\n\nexport const initContentMenus = async () => {\n\tawait resetContextMenus();\n};\n\n\nlet resetContextMenusIng = false;\n\nexport const resetContextMenus = async () => {\n\tif (resetContextMenusIng) return;\n\tresetContextMenusIng = true;\n\t// 移除所有菜单先\n\tawait chrome.contextMenus.removeAll();\n\t// 获取用户信息\n\tlet self = await getSelfInfoStorage();\n\t// 已登录\n\tif (self) {\n\t\tawait chrome.contextMenus.create({\n\t\t\tid: \"MENU_PARENT\",\n\t\t\ttitle: `${self.user_basic.user_name}的掘金`,\n\t\t\tcontexts: [\"all\"]\n\t\t});\n\t\tawait chrome.contextMenus.create({\n\t\t\tid: \"SELF_HOME\",\n\t\t\ttitle: \"我的主页\",\n\t\t\tparentId: \"MENU_PARENT\",\n\t\t\tcontexts: [\"all\"]\n\t\t});\n\t\tawait chrome.contextMenus.create({\n\t\t\tid: \"SELF_NOTIFICATION\",\n\t\t\ttitle: \"我的消息\",\n\t\t\tparentId: \"MENU_PARENT\",\n\t\t\tcontexts: [\"all\"]\n\t\t});\n\t\tawait chrome.contextMenus.create({\n\t\t\tid: \"separator1\",\n\t\t\ttype: \"separator\",\n\t\t\tparentId: \"MENU_PARENT\",\n\t\t\tcontexts: [\"all\"]\n\t\t});\n\t\tawait chrome.contextMenus.create({ id: \"SIGN_IN\", title: \"快速签到\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\n\t\tawait chrome.contextMenus.create({ id: \"BUG_FIX\", title: \"收集BUG\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\n\t\tawait chrome.contextMenus.create({\n\t\t\tid: 'FREE_LUCKY_DRAW',\n\t\t\ttitle: \"免费抽奖\",\n\t\t\tparentId: \"MENU_PARENT\",\n\t\t\tcontexts: [\"all\"]\n\t\t})\n\t\tawait chrome.contextMenus.create({\n\t\t\tid: \"separator2\",\n\t\t\ttype: \"separator\",\n\t\t\tparentId: \"MENU_PARENT\",\n\t\t\tcontexts: [\"all\"]\n\t\t});\n\t\tawait chrome.contextMenus.create({ id: \"LOGOUT\", title: \"登出\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\n\t} else {\n\t\tawait chrome.contextMenus.create({ id: \"OPEN_JUEJIN\", type: \"normal\", title: `掘金首页`, contexts: [\"all\"] });\n\t}\n\tresetContextMenusIng = false;\n};\n\nexport const onClick = async (info, tab) => {\n\tlet self = await getSelfInfoStorage();\n\tlet { windowId } = tab;\n\tlet { menuItemId } = info;\n\tif (menuItemId === \"OPEN_JUEJIN\") { // 打开掘金\n\t\tawait chrome.tabs.create({ url: `https://juejin.cn/`, selected: true, windowId });\n\t}\n\tif (menuItemId === \"SELF_HOME\") { // 我的主页\n\t\tawait chrome.tabs.create({\n\t\t\turl: `https://juejin.cn/user/${self.user_basic.user_id}`,\n\t\t\tselected: true,\n\t\t\twindowId\n\t\t});\n\t}\n\tif (menuItemId === \"SELF_NOTIFICATION\") { // 我的消息\n\t\tawait chrome.tabs.create({ url: `https://juejin.cn/notification`, selected: true, windowId });\n\t}\n\tif (menuItemId === \"LOGOUT\") { // 登出\n\t\tawait logout();\n\t}\n\tif (menuItemId === \"SIGN_IN\") { // 签到\n\t\tawait signin();\n\t}\n\tif (menuItemId === \"BUG_FIX\") { // 收集bug\n\t\tawait bugfix();\n\t}\n\tif (menuItemId === 'FREE_LUCKY_DRAW') { // 免费抽奖\n\t\tawait freeLuckyDraw()\n\t}\n};\n","// 获取cookie\nexport const getCookie = async () => {\n\tlet cookies = await chrome.cookies.getAll({})\n\tlet arr = cookies.map(cookie => `${cookie.name}=${cookie.value}`);\n\treturn arr.join(';');\n}\n\nexport const handleApiResult = (apiRes) => {\n\treturn Object.assign({}, apiRes, { success: apiRes.err_no === 0 })\n}\n\nexport const getAllJueJinTabs = async () => {\n\treturn await chrome.tabs.query({ url: 'https://juejin.cn/*' });\n}\n\nexport const isJueJinByTab = (tab) => {\nreturn tab.url.includes('juejin.cn');\n}\n\nexport const sleep = (s) => {\n\treturn new Promise(res => {\n\t\tsetTimeout(res, s * 1000)\n\t})\n}\n\n// 获取本月月初时间戳\nexport const getCurrentMonthFirstTime = () => {\n\tvar data = new Date();\n\tdata.setDate(1);\n\tdata.setHours(0);\n\tdata.setSeconds(0);\n\tdata.setMinutes(0);\n\treturn data.getTime();\n}\n\n// 获取本周一时间戳\nexport const getCurrentWeekFirstTime = () => {\n\tconst now = new Date()\n\tconst nowTime = now.getTime()\n\t// getDay()返回0-6，其中0表示周日，需特殊处理\n\tconst day = now.getDay() > 0 ? now.getDay() : 7 // 表示当前是周几\n\tconst oneDayTime = 24 * 60 * 60 * 1000 // 一天的总ms\n\t// 本周一时间戳\n\tconst MondayTime = nowTime - (day - 1) * oneDayTime\n\t// 格式化时间\n\tconst monday = new Date(MondayTime);\n\tmonday.setHours(0);\n\tmonday.setSeconds(0);\n\tmonday.setMinutes(0);\n\treturn monday.getTime();\n}\n\n\nexport const uuid = () => {\n\tvar s = [];\n\tvar hexDigits = \"0123456789abcdef\";\n\tfor (var i = 0; i < 36; i++) {\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n\t}\n\ts[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\n\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n\ts[8] = s[13] = s[18] = s[23] = \"-\";\n\n\tvar uuid = s.join(\"\");\n\treturn uuid;\n}","export const setStorage = async (key, value) => {\n    await chrome.storage.local.set({ [key]: value })\n}\n\nexport const getStorage = async (key) => {\n    return (await chrome.storage.local.get())[key];\n}","import { uuid } from \"./tool\";\nimport config from \"../../config\";\n\nexport const sendBasicNotifications = (title, message) => {\n\tchrome.notifications.getPermissionLevel(level => {\n\t\tif (level === 'granted') {\n\t\t\tchrome.notifications.create(uuid(), {\n\t\t\t\ttype: 'basic',\n\t\t\t\ttitle,\n\t\t\t\tmessage,\n\t\t\t\ticonUrl: config.iconUrl,\n\t\t\t})\n\t\t}\n\t})\n}","export default {\n  iconUrl: \"static/img/icon.png\"\n};\n","import { resetContextMenus } from \"./contextMenus\";\nimport { handleApiResult, getAllJueJinTabs, sleep } from \"./tool\";\nimport { getStorage, setStorage } from \"./storage\";\nimport { sendBasicNotifications } from \"./message\";\n\n// 获取个人信息缓存\nexport const getSelfInfoStorage = async () => {\n\treturn await getStorage(\"juejin-self\");\n};\n\n// 设置个人信息缓存\nexport const setSelfInfoStorage = async (selfInfo) => {\n\tawait setStorage(\"juejin-self\", selfInfo);\n};\n\n// 登出\nexport const logout = async () => {\n\tawait fetch(\"https://juejin.cn/passport/web/logout/\", {\n\t\tcredentials: 'include',\n\t});\n\t// 取出所有打开的掘金tab\n\tlet tabs = await getAllJueJinTabs();\n\tfor (let tab of tabs) {   // 刷新当前页\n\t\tawait chrome.tabs.update(tab.id, { url: tab.url });\n\t}\n\tawait setSelfInfoStorage(null);\n\tawait resetContextMenus();\n};\n\n// 获取用户信息\nexport const getUserInfo = async (userId) => {\n\tlet res = await fetch(`https://api.juejin.cn/user_api/v1/user/get?user_id=${userId}`, {\n\t\tcredentials: 'include',\n\t}).then(res => res.json());\n\tlet { success, data } = handleApiResult(res);\n\treturn success ? data : null;\n};\n\n// 更新登录人信息\nexport const resetSelfInfo = async () => {\n\tlet res = await fetch(\"https://api.juejin.cn/user_api/v1/user/get_info_pack\",\n\t\t{\n\t\t\tcredentials: 'include',\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ \"pack_req\": { \"user_counter\": true, \"user_growth_info\": true, \"user\": true } })\n\t\t}).then(res => res.json());\n\tlet { data: userInfo } = handleApiResult(res);\n\tif (!userInfo) return await setSelfInfoStorage(null);\n\tawait setSelfInfoStorage(userInfo);\n\treturn userInfo;\n};\n\n// 签到\nexport const signin = async () => {\n\tlet res = await fetch(\"https://api.juejin.cn/growth_api/v1/check_in\", {\n\t\tcredentials: 'include',\n\t\tmethod: \"POST\"\n\t}).then(res => res.json());\n\tlet { success, data, err_msg } = handleApiResult(res);\n\tsendBasicNotifications(\"掘金签到：\" + (success ? \"成功\" : \"失败\"), success ? `本次新增矿石：${data.incr_point}，当前矿石：${data.sum_point}` : err_msg)\n};\n\n// 收集bug\nexport const bugfix = async () => {\n\tlet res = await fetch(\"https://api.juejin.cn/user_api/v1/bugfix/not_collect\", {\n\t\tcredentials: 'include',\n\t\tmethod: \"POST\"\n\t}).then(res => res.json());\n\tlet { success, data, err_msg } = handleApiResult(res);\n\tsendBasicNotifications(\"掘金BugFix：\" + (success ? \"成功\" : \"失败\"), success ? `今日掘金bugfix：${data.length}` : err_msg)\n\tif (!success) return;\n\tdata.forEach(bug => {\n\t\tfetch(\"https://api.juejin.cn/user_api/v1/bugfix/collect\", {\n\t\t\tcredentials: 'include',\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify(bug)\n\t\t});\n\t});\n};\n\n// 免费抽奖\nexport const freeLuckyDraw = async () => {\n\tlet res = await fetch('https://api.juejin.cn/growth_api/v1/lottery_config/get', {\n\t\tcredentials: 'include',\n\t}).then(res => res.json());\n\tres = handleApiResult(res);\n\tif (!res.success) return sendBasicNotifications('今日免费抽奖失败', res.err_msg);\n\tif (!res.data.free_count) return sendBasicNotifications('今日免费抽奖失败', '今日免费抽奖次数已经用完');\n\tres = await fetch('https://api.juejin.cn/growth_api/v1/lottery/draw', {\n\t\tcredentials: 'include',\n\t\tmethod: 'POST'\n\t}).then(res => res.json());\n\tres = handleApiResult(res);\n\tif (!res.success) return sendBasicNotifications('今日免费抽奖失败', res.err_msg);\n\tsendBasicNotifications('今日免费抽奖成功', `恭喜抽到：${res.data.lottery_name}`);\n}\n\n// 获取未读消息数\nexport const loopMessageNotReadCount = async () => {\n\tif (await getSelfInfoStorage()) {\n\t\tlet res = await fetch(\"https://api.juejin.cn/interact_api/v1/message/count\", {\n\t\t\tcredentials: 'include',\n\t\t}).then(res => res.json());\n\t\tlet { success, data } = handleApiResult(res);\n\t\tif (success) {\n\t\t\t// count[1]：点赞和收藏  count[3]：评论\n\t\t\tlet { count, total } = data;\n\t\t\tlet items = [];\n\t\t\tif (count[1]) items.push(`点赞和收藏：${count[1]}条`)\n\t\t\tif (count[3]) items.push(`评论：${count[3]}条`)\n\t\t\tlet notReadStrStorage = await getStorage(\"message-not-read\");\n\t\t\t// 有未读且详情文字不相同\n\t\t\tif (total && notReadStrStorage !== JSON.stringify(items)) {\n\t\t\t\tsendBasicNotifications(`您有${total}条掘金未读消息，以下为详细内容`, `${items.join('\\n')}`);\n\t\t\t\tawait setStorage(\"message-not-read\", JSON.stringify(items));\n\t\t\t}\n\t\t}\n\t}\n\tsetTimeout(() => {\n\t\tloopMessageNotReadCount();\n\t}, 10 * 1000)\n};\n\nexport const initAuth = async () => {\n\tawait resetSelfInfo();\n\tawait loopMessageNotReadCount()\n};\n","import { initAuth } from \"./auth.js\";\nimport { initContentMenus, onClick } from \"./contextMenus.js\";\nimport { onUpdated } from \"./tabs.js\";\n\n\nchrome.contextMenus.onClicked.addListener(onClick);\nchrome.tabs.onUpdated.addListener(onUpdated);\n\nconst init = async () => {\n  await initAuth();\n  await initContentMenus();\n};\n\ninit();\n","import { resetContextMenus } from \"./contextMenus\";\nimport { resetSelfInfo } from \"./auth\";\nimport { isJueJinByTab } from \"./tool\";\n\nexport const onUpdated = async (tabId, changeInfo, tab) => {\n  if (changeInfo.status !== \"complete\") return;\n  let isJueJin = isJueJinByTab(tab);\n  if (isJueJin) await resetSelfInfo();\n  await resetContextMenus();\n  if (isJueJin) await chrome.tabs.sendMessage(tab.id, { from: \"background\", event: \"page-change-complete\" });\n};\n"],"names":["resetContextMenusIng","resetContextMenus","async","chrome","contextMenus","removeAll","self","getSelfInfoStorage","create","id","title","user_basic","user_name","contexts","parentId","type","handleApiResult","apiRes","Object","assign","success","err_no","setStorage","key","value","storage","local","set","getStorage","get","sendBasicNotifications","message","notifications","getPermissionLevel","level","uuid","s","hexDigits","i","substr","Math","floor","random","join","iconUrl","setSelfInfoStorage","selfInfo","resetSelfInfo","res","fetch","credentials","method","headers","body","JSON","stringify","then","json","data","userInfo","loopMessageNotReadCount","count","total","items","push","notReadStrStorage","setTimeout","onClicked","addListener","info","tab","windowId","menuItemId","tabs","url","selected","user_id","query","getAllJueJinTabs","update","logout","err_msg","incr_point","sum_point","signin","length","forEach","bug","bugfix","free_count","lottery_name","freeLuckyDraw","onUpdated","tabId","changeInfo","status","isJueJin","includes","isJueJinByTab","sendMessage","from","event","initAuth","initContentMenus","init"],"sourceRoot":""}