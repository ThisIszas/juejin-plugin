{"version":3,"file":"background.main.js","mappings":"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;;;;;;;;;;;ACAxa;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC,EAAE,oBAAoB,EAAE,sBAAsB,EAAE;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,+DAA+D,EAAE,wBAAwB,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA,iDAAiD,IAAI;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sBAAsB;AAC3D,0CAA0C,+BAA+B;AACzE,sCAAsC,4BAA4B;AAClE,sCAAsC,4BAA4B;AAClE,uCAAuC,4BAA4B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,uCAAuC;AACjF,sCAAsC,oCAAoC;AAC1E,sCAAsC,oCAAoC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACmB;AACA;AACM;AACD;AACC;AACD;AACQ;AACF;AACd;AACE;AACG;AACa;AAClB;AACE;AACC;AACO;AACF;AACA;AACI;AACF;AAC1B;AAC6B;;;;;;;UCvS7B;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;ACNuE;AACY;AACnC;AACQ;;AAExD;AACA5K,MAAM,CAAC4B,YAAY,CAACmJ,SAAS,CAACC,WAAW,CAACtI,yEAAmB,CAAC;AAC9D1C,MAAM,CAACe,IAAI,CAACkK,SAAS,CAACD,WAAW,CAACxD,yDAAW,CAAC;AAC9CxH,MAAM,CAACkL,OAAO,CAACC,SAAS,CAACH,WAAW,CAACrH,iEAAgB,CAAC;AACtD3D,MAAM,CAACkL,OAAO,CAACE,WAAW,CAACJ,WAAW,CAAC,YAAY;EAClD;EACA,MAAMzD,2DAAS,EAAE;EACjB;EACA,MAAMnF,2EAAiB,EAAE;EACzB;EACA+G,yEAAuB,EAAE;AAC1B,CAAC,CAAC,C","sources":["webpack://juejin-plugin/./src/pages/background/api/content.js","webpack://juejin-plugin/./src/pages/background/api/index.js","webpack://juejin-plugin/./src/pages/background/api/interact.js","webpack://juejin-plugin/./src/pages/background/api/message.js","webpack://juejin-plugin/./src/pages/background/api/recommend.js","webpack://juejin-plugin/./src/pages/background/api/tag.js","webpack://juejin-plugin/./src/pages/background/api/user.js","webpack://juejin-plugin/./src/pages/background/chrome.js","webpack://juejin-plugin/./src/pages/background/controller/contextMenus.js","webpack://juejin-plugin/./src/pages/background/controller/message.js","webpack://juejin-plugin/./src/pages/background/controller/pin.js","webpack://juejin-plugin/./src/pages/background/controller/tabs.js","webpack://juejin-plugin/./src/pages/background/controller/user.js","webpack://juejin-plugin/./src/tool/index.js","webpack://juejin-plugin/./node_modules/dayjs/dayjs.min.js","webpack://juejin-plugin/./node_modules/dayjs/locale/zh-cn.js","webpack://juejin-plugin/./node_modules/dayjs/plugin/relativeTime.js","webpack://juejin-plugin/./node_modules/dayjs/plugin/weekday.js","webpack://juejin-plugin/./node_modules/js-base64/base64.mjs","webpack://juejin-plugin/webpack/bootstrap","webpack://juejin-plugin/webpack/runtime/compat get default export","webpack://juejin-plugin/webpack/runtime/define property getters","webpack://juejin-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://juejin-plugin/webpack/runtime/make namespace object","webpack://juejin-plugin/./src/pages/background/index.js"],"sourcesContent":["// 内容相关\r\nimport { ajax } from \"./index\";\r\n\r\n/*\r\n* 删除沸点\r\n* */\r\nexport const removeShortMsg = (msgId) => ajax({\r\n\turl: `https://api.juejin.cn/content_api/v1/short_msg/delete`,\r\n\tmethod: 'POST',\r\n\tdata: { msg_id: msgId },\r\n\tisInclude: true,\r\n})\r\n\r\n/*\r\n* 获取用户沸点列表\r\n* */\r\nexport const getShortMsgList = ({ userId, cursor = 0, sortType = 4, limit = 999 }) => ajax({\r\n\turl: `https://api.juejin.cn/content_api/v1/short_msg/query_list`,\r\n\tmethod: 'POST',\r\n\tdata: { user_id: userId, cursor: cursor.toString(), sort_type: sortType, limit: limit }\r\n})\r\n\r\n/*\r\n* 发布沸点\r\n* @param content 内容\r\n* @param topicId 圈子id\r\n* */\r\nexport const publishShortMsg = (content, topicId = null) => ajax({\r\n\turl: `https://api.juejin.cn/content_api/v1/short_msg/publish`,\r\n\tmethod: \"POST\",\r\n\tdata: { content, topicId, sync_to_org: false },\r\n\tisInclude: true,\r\n})","export const ajax = async ({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t url,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t method = 'GET',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t data,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t isInclude = false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t headers = { \"Content-Type\": \"application/json\" }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t }) => {\r\n\tlet credentials = isInclude ? 'include' : 'omit'\r\n\tlet res = await fetch(url, {\r\n\t\tmethod,\r\n\t\tcredentials,\r\n\t\theaders,\r\n\t\tbody: JSON.stringify(data),\r\n\t})\r\n\t.then(res => res.json())\r\n\t.catch(e => ({ err_no: 1, err_msg: '接口出错' }))\r\n\treturn handleApiResult(res);\r\n}\r\n\r\nexport const handleApiResult = (apiRes) => {\r\n\treturn Object.assign({}, apiRes, { success: apiRes.err_no === 0 })\r\n}","import { ajax } from \"./index\";\r\n\r\n\r\n/*\r\n* 获取点赞列表\r\n* @param item_type 4：沸点\r\n* @param sort_type 2：时间倒序\r\n* */\r\nexport const diggQueryPage = ({ cursor = 0, item_type = 4, sort_type = 2, user_id }) => ajax({\r\n\turl: `https://api.juejin.cn/interact_api/v1/digg/query_page`,\r\n\tmethod: 'POST',\r\n\tdata: { cursor: cursor.toString(), item_type, sort_type, user_id }\r\n})\r\n\r\n/*\r\n* 取消点赞\r\n* @param itemId id\r\n* @param itemType 4：沸点\r\n* */\r\nexport const cancelDigg = (itemId, itemType) => ajax({\r\n\turl: `https://api.juejin.cn/interact_api/v1/digg/cancel`,\r\n\tmethod: 'POST',\r\n\tdata: { item_id: itemId, item_type: itemType },\r\n\tisInclude: true,\r\n})","// 消息相关\r\nimport { ajax } from \"./index\";\r\n\r\nexport const getNotReadMessageCount = () => ajax({\r\n\turl: `https://api.juejin.cn/interact_api/v1/message/count`,\r\n\tisInclude: true,\r\n})","import { ajax } from \"./index\";\r\nimport { encode } from 'js-base64';\r\n\r\n\r\n/*\r\n* 获取沸点列表\r\n* */\r\nexport const getTopicShortMsgList = ({ topic_id, cursor = 0, id_type = 4, limit = 459, sort_type = 500 }) => ajax({\r\n\turl: `https://api.juejin.cn/recommend_api/v1/short_msg/topic`,\r\n\tmethod: \"POST\",\r\n\tdata: { topic_id, cursor: encode(JSON.stringify({ v: \"\", i: cursor })), id_type, limit, sort_type }\r\n})","import { ajax } from \"./index\";\r\n\r\n/*\r\n* 获取沸点圈子详情\r\n* */\r\n\r\nexport const queryTopicDetail = (topicId) => ajax({\r\n\turl: `https://api.juejin.cn/tag_api/v1/query_topic_detail`,\r\n\tmethod: 'POST',\r\n\tdata: { topic_id: topicId }\r\n})","// 用户相关\r\nimport { ajax } from \"./index\";\r\n\r\n/*\r\n* 用户登出\r\n* */\r\nexport const logout = () => ajax({\r\n\turl: 'https://juejin.cn/passport/web/logout/',\r\n\tisInclude: true\r\n})\r\n\r\n/*\r\n* 登录人获取自己的信息\r\n* */\r\nexport const getSelfInfo = () => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/user/get_info_pack`,\r\n\tmethod: 'POST',\r\n\tdata: { pack_req: { user_counter: true, user_growth_info: true, user: true } },\r\n\tisInclude: true\r\n})\r\n\r\n/*\r\n* 获取用户信息\r\n* @param userId 用户id\r\n* */\r\nexport const getUserInfo = (userId) => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/user/get?user_id=${userId}`\r\n})\r\n\r\n/*\r\n* 用户签到\r\n* */\r\nexport const checkIn = () => ajax({\r\n\turl: 'https://api.juejin.cn/growth_api/v1/check_in',\r\n\tmethod: 'POST',\r\n\tisInclude: true\r\n})\r\n\r\n/*\r\n* 获取未收集的bug\r\n* */\r\nexport const getNotCollectBug = () => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/bugfix/not_collect`,\r\n\tmethod: 'POST',\r\n\theaders: {},\r\n\tisInclude: true,\r\n})\r\n\r\n/*\r\n* 收集bug\r\n* @param bug bug对象\r\n* */\r\nexport const collectBug = (bug) => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/bugfix/collect`,\r\n\tmethod: 'POST',\r\n\tdata: bug,\r\n\tisInclude: true,\r\n})\r\n\r\n/*\r\n* 获取今日免费抽奖次数\r\n* */\r\nexport const getLotteryConfig = () => ajax({\r\n\turl: `https://api.juejin.cn/growth_api/v1/lottery_config/get`,\r\n\tisInclude: true,\r\n})\r\n\r\n/*\r\n* 抽奖\r\n* */\r\nexport const drawLottery = () => ajax({\r\n\turl: `https://api.juejin.cn/growth_api/v1/lottery/draw`,\r\n\tmethod: 'POST',\r\n\tisInclude: true,\r\n})\r\n\r\n\r\n/*\r\n* 获取用户动态\r\n* @param userId 用户id\r\n* @param cursor 偏移数\r\n* */\r\nexport const getDynamic = (userId, cursor) => ajax({\r\n\turl: `https://api.juejin.cn/user_api/v1/user/dynamic?user_id=${userId}&cursor=${cursor}`\r\n})","import dayjs from 'dayjs';\r\nimport { uuid } from \"../../tool\";\r\n\r\n/*\r\n* 设置缓存\r\n* @param key 名称\r\n* @param value 数据\r\n* @param minute 缓存多少分钟，如果没有则永久缓存\r\n* */\r\nexport const setStorage = async (key, value, minute) => {\r\n\tlet setTime = dayjs().format('YYYY-MM-DD HH:mm:ss');\r\n\tlet overdueTime = minute !== undefined ? dayjs(setTime).add(minute, 'minute').format('YYYY-MM-DD HH:mm:ss') : null;\r\n\tlet storage = { [key]: { value, setTime, overdueTime } }\r\n\tawait chrome.storage.local.set(storage);\r\n}\r\n\r\n/*\r\n* 获取缓存\r\n* @param key 名称\r\n* */\r\nexport const getStorage = async (key) => {\r\n\tlet storage = (await chrome.storage.local.get())[key];\r\n\tif (!storage) return null;\r\n\t// 如果结束时间存在 && 当前时间不在结束之间之前\r\n\tif (storage.overdueTime && !dayjs().isBefore(storage.overdueTime)) return null;\r\n\treturn storage.value;\r\n}\r\n\r\n/*\r\n* 发送桌面通知\r\n* @param title 标题\r\n* @param message 内容\r\n* */\r\nexport const sendBasicNotifications = (title, message) => {\r\n\tchrome.notifications.create(uuid(), { type: 'basic', title, message, iconUrl: \"static/img/icon.png\" })\r\n}\r\n\r\n/*\r\n* 创建tab\r\n* @param tab 标签信息\r\n* */\r\nexport const createTab = (tab) => {\r\n\treturn chrome.tabs.create(tab);\r\n}\r\n\r\n/*\r\n* 查询tabs\r\n* @param search 需要查询的条件\r\n* */\r\nexport const queryTabs = (search = {}) => {\r\n\treturn chrome.tabs.query(search)\r\n}\r\n\r\n/*\r\n* 修改tab\r\n* @param tabId 标签id\r\n* @param tab 标签信息\r\n* */\r\nexport const updateTab = (tabId, tab) => {\r\n\treturn chrome.tabs.update(tabId, tab);\r\n}\r\n\r\n/*\r\n* 给标签页发信息\r\n* */\r\nexport const sendMessageToTab = (tabId, info) => {\r\n\treturn chrome.tabs.sendMessage(tabId, Object.assign(info, { from: 'background' }))\r\n}\r\n\r\n/*\r\n* 创建菜单\r\n* @param menu 按钮信息\r\n* */\r\nexport const createContextMenu = (menu) => {\r\n\treturn chrome.contextMenus.create(menu);\r\n}\r\n\r\n/*\r\n* 删除全部菜单\r\n* */\r\nexport const removeAllContextMenus = () => {\r\n\treturn chrome.contextMenus.removeAll();\r\n}","import { getSelfStorage, logout, signin, bugfix, freeLucky } from \"./user\";\r\nimport { createContextMenu, createTab, removeAllContextMenus } from \"../chrome\";\r\n\r\n\r\nlet resetContextMenusIng = false;\r\n\r\n/*\r\n* 重置所有右键菜单\r\n* */\r\nexport const resetContextMenus = async () => {\r\n\tif (resetContextMenusIng) return;\r\n\tresetContextMenusIng = true;\r\n\t// 移除所有菜单\r\n\tawait removeAllContextMenus()\r\n\t// 获取用户信息\r\n\tlet user = await getSelfStorage();\r\n\t// 已登录\r\n\tif (user) {\r\n\t\tawait createContextMenu({ id: \"MENU_PARENT\", title: `${user.user_basic.user_name}的掘金`, contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"SELF_HOME\", title: \"我的主页\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"SELF_NOTIFICATION\", title: \"我的消息\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"separator1\", type: \"separator\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"SIGN_IN\", title: \"快速签到\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t\tawait createContextMenu({ id: \"BUG_FIX\", title: \"收集BUG\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t\tawait createContextMenu({ id: 'FREE_LUCKY_DRAW', title: \"免费抽奖\", parentId: \"MENU_PARENT\", contexts: [\"all\"] })\r\n\t\tawait createContextMenu({ id: \"separator2\", type: \"separator\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t\tawait createContextMenu({ id: \"LOGOUT\", title: \"登出\", parentId: \"MENU_PARENT\", contexts: [\"all\"] });\r\n\t} else {\r\n\t\tawait createContextMenu({ id: \"OPEN_JUEJIN\", type: \"normal\", title: `掘金首页`, contexts: [\"all\"] });\r\n\t}\r\n\tresetContextMenusIng = false;\r\n};\r\n\r\n/*\r\n*  菜单被点击\r\n* */\r\nexport const contextMenusOnClick = async (info, tab) => {\r\n\tlet user = await getSelfStorage();\r\n\tlet { menuItemId } = info;\r\n\tlet { windowId } = tab;\r\n\tif (menuItemId === \"OPEN_JUEJIN\") { // 打开掘金\r\n\t\tcreateTab({ url: `https://juejin.cn/`, selected: true, windowId })\r\n\t}\r\n\tif (menuItemId === \"SELF_HOME\") { // 我的主页\r\n\t\tawait createTab({ url: `https://juejin.cn/user/${user.user_basic.user_id}`, selected: true, windowId })\r\n\t}\r\n\tif (menuItemId === \"SELF_NOTIFICATION\") { // 我的消息\r\n\t\tawait createTab({ url: `https://juejin.cn/notification`, selected: true, windowId })\r\n\t}\r\n\tif (menuItemId === \"LOGOUT\") { // 登出\r\n\t\tawait logout();\r\n\t}\r\n\tif (menuItemId === \"SIGN_IN\") { // 签到\r\n\t\tawait signin();\r\n\t}\r\n\tif (menuItemId === \"BUG_FIX\") { // fixbug\r\n\t\tawait bugfix();\r\n\t}\r\n\tif (menuItemId === 'FREE_LUCKY_DRAW') { // 免费抽奖\r\n\t\tawait freeLucky()\r\n\t}\r\n};","// 消息相关\r\n\r\nimport { getSelfStorage, getYearDynamic } from \"./user\";\r\nimport {\r\n\tgetPinClubInfo,\r\n\tgetUserPins,\r\n\tremovePin,\r\n\tgetPinClubDayUserRank,\r\n\tgetUserZanPins,\r\n\tcancelZanPin,\r\n\tgetRandomText\r\n} from \"./pin\";\r\n\r\n// 事件处理map\r\nconst eventHandleMap = {\r\n\t'get-self-info': () => getSelfStorage(),\t// 获取个人信息\r\n\t'get-user-pins': (data) => getUserPins(data), // 获取用户沸点列表\r\n\t'remove-pin': (data) => removePin(data), // 删除沸点\r\n\t'get-pin-club-info': (data) => getPinClubInfo(data),\t// 获取沸点圈子详情\r\n\t'get-pin-club-day-user-rank': (data) => getPinClubDayUserRank(data), //获取圈子一周废物榜\r\n\t'get-user-zan-pins': (data) => getUserZanPins(data), // 获取用户点赞列表\r\n\t'cancel-zan-pin': (data) => cancelZanPin(data), // 取消沸点点赞\r\n\t'get-year-dynamic': (data) => getYearDynamic(data), // 获取年度动态\r\n\t'get-random-text': (data) => getRandomText(data)\r\n}\r\n\r\nconst handleOnMessage = async (event, data, callback) => {\r\n\tcallback(await eventHandleMap[event](data));\r\n}\r\n\r\n/*\r\n* 当页面发来了消息\r\n* */\r\nexport const runtimeOnMessage = (request, sender, sendResponse) => {\r\n\tlet { to, event, data } = request;\r\n\tif (to !== 'background') return;\r\n\thandleOnMessage(event, data, sendResponse)\r\n\treturn true\r\n}","// 沸点相关\r\nimport { getShortMsgList, removeShortMsg, getRandomText as apiGetRandomText } from \"../api/content\";\r\nimport { queryTopicDetail } from \"../api/tag\";\r\nimport { getTopicShortMsgList } from \"../api/recommend\";\r\nimport { getStorage, setStorage } from \"../chrome\";\r\nimport { getUserInfo } from \"./user\";\r\nimport { dayjs, getRandInt, sleep, uuid } from \"../../../tool\";\r\nimport { cancelDigg, diggQueryPage } from \"../api/interact\";\r\n\r\n/*\r\n* 获取用户沸点列表\r\n* */\r\nexport const getUserPins = async (userId) => {\r\n\t// 先获取数量\r\n\tlet res = await getShortMsgList({ userId, limit: 1 });\r\n\tif (!res.success) return [];\r\n\tres = await getShortMsgList({ userId, limit: res.count });\r\n\treturn res.success ? res.data : []\r\n}\r\n\r\n/*\r\n* 删除沸点\r\n* */\r\nexport const removePin = async (pin) => {\r\n\treturn await removeShortMsg(pin.msg_id);\r\n}\r\n\r\n/*\r\n* 获取用户点赞列表\r\n* */\r\nexport const getUserZanPins = async (userId) => {\r\n\tlet { success, data, count } = await diggQueryPage({ user_id: userId, item_type: 4 });\r\n\treturn success ? { pins: data, count: count } : { pins: [], count: 0 }\r\n}\r\n\r\n/*\r\n* 取消点赞\r\n* */\r\nexport const cancelZanPin = async (pin) => {\r\n\tlet { success } = await cancelDigg(pin.msg_id, 4);\r\n\treturn success;\r\n}\r\n\r\n/*\r\n* 获取圈子详情\r\n* 缓存7天\r\n* */\r\nexport const getPinClubInfo = async (clubId) => {\r\n\tlet storageKey = `pin-club-info-${clubId}`;\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage) return storage;\r\n\tlet { success, data } = await queryTopicDetail(clubId);\r\n\tif (!success) return null\r\n\tawait setStorage(storageKey, data, 60 * 24 * 7);\r\n\treturn data\r\n}\r\n\r\n/*\r\n* 获取圈子当日废物榜\r\n* @param clubId 圈子id\r\n* @param isRefresh 是否需要更新缓存\r\n* */\r\nexport const getPinClubDayUserRank = async ({ clubId, isRefresh }) => {\r\n\tlet storageKey = `pin-club-day-user-rank-${clubId}`;\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage && !isRefresh) return storage;\r\n\tstorage = { time: dayjs().format('YYYY-MM-DD HH:mm:ss'), rank: [] };\r\n\tlet topicList = [];\r\n\tfor (let i = 0; i < 10; i++) {\r\n\t\tlet { success, data } = await getTopicShortMsgList({ topic_id: clubId, limit: 100, cursor: 100 * i })\r\n\t\tawait sleep(0.5)\r\n\t\tif (!success) break;\r\n\t\tlet next = true;\r\n\t\tfor (let msg of data) {\r\n\t\t\tif (msg.msg_Info.ctime * 1000 < dayjs().startOf('day').valueOf()) {\r\n\t\t\t\tnext = false;\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\ttopicList.push(msg)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!next) break;\r\n\t}\r\n\tlet userMsgMap = {};\r\n\tlet userInfoMap = {};\r\n\tfor (let msg of topicList) {\r\n\t\tlet { user_id } = msg.msg_Info;\r\n\t\tuserMsgMap[user_id] ? userMsgMap[user_id].push(msg) : userMsgMap[user_id] = [msg];\r\n\t\tuserInfoMap[user_id] = msg.author_user_info;\r\n\t}\r\n\tlet users = [];\r\n\tfor (let userId in userMsgMap) {\r\n\t\tusers.push({ userId, userInfo: userInfoMap[userId], msgCount: userMsgMap[userId].length });\r\n\t}\r\n\tusers.sort((a, b) => b.msgCount - a.msgCount);\r\n\tlet rank = [];\r\n\tfor (let user of users) {\r\n\t\tif (!rank.length) {\r\n\t\t\trank.push({ msgCount: user.msgCount, users: [user] });\r\n\t\t} else {\r\n\t\t\tlet { msgCount, users } = rank[rank.length - 1];\r\n\t\t\tif (user.msgCount === msgCount) {\r\n\t\t\t\tusers.push(user);\r\n\t\t\t} else {\r\n\t\t\t\tif (rank.length < 3) {\r\n\t\t\t\t\trank.push({ msgCount: user.msgCount, users: [user] });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstorage.rank = rank;\r\n\tlet endTime = (dayjs().endOf('day').valueOf() - dayjs().valueOf()) / 1000 / 60;\r\n\tawait setStorage(storageKey, storage, endTime);\r\n\treturn storage\r\n}\r\n\r\n\r\n/*\r\n* 获取随机文本\r\n* */\r\nexport const getRandomText = async (clubName) => {\r\n\tconst appId = 'nhhhdemgpmhixsnv';\r\n\tconst appSecret = 'Y296dDlVdVVhRnhucmJmUnhvRVY2UT09'\r\n\tlet resStr = '';\r\n\ttry {\r\n\t\tif (clubName.includes('搞笑')) { // 获取每日搞笑段子\r\n\t\t\tlet { data: jokeInfo } = await fetch(`https://www.mxnzp.com/api/jokes/list?page=${getRandInt(1, 8715)}&app_id=${appId}&app_secret=${appSecret}`).then(res => res.json());\r\n\t\t\tif (jokeInfo && jokeInfo.list.length) {\r\n\t\t\t\tresStr += `${jokeInfo.list[getRandInt(0, jokeInfo.list.length - 1)].content}`;\r\n\t\t\t}\r\n\t\t} else if (clubName.includes('今日新鲜事')) { // 今日新鲜事\r\n\t\t\t// 先获取列表\r\n\t\t\tawait sleep(1);\r\n\t\t\tlet { data: typeList } = await fetch(`https://www.mxnzp.com/api/news/types?app_id=${appId}&app_secret=${appSecret}`).then(res => res.json());\r\n\t\t\tif (typeList && typeList.length) {\r\n\t\t\t\tlet currentType = typeList[getRandInt(0, typeList.length - 1)];\r\n\t\t\t\tawait sleep(1);\r\n\t\t\t\t// 获取详情\r\n\t\t\t\tlet { data: newList } = await fetch(`https://www.mxnzp.com/api/news/list?typeId=${currentType.typeId}&page=1&app_id=${appId}&app_secret=${appSecret}`).then(res => res.json());\r\n\t\t\t\tif (newList && newList.length) {\r\n\t\t\t\t\tlet currentNew = newList[getRandInt(0, newList.length - 1)];\r\n\t\t\t\t\tresStr += `${currentType.typeName}｜${currentNew.title}`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else { // 其他\r\n\t\t\tawait sleep(1);\r\n\t\t\tlet { data: contentList } = await fetch(`https://www.mxnzp.com/api/daily_word/recommend?count=20&app_id=${appId}&app_secret=${appSecret}`).then(res => res.json());\r\n\t\t\tif (contentList && contentList.length) {\r\n\t\t\t\tresStr += `${contentList[0, contentList.length - 1].content}`\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 获取ip信息\r\n\t\tawait sleep(1);\r\n\t\tlet { data: ipInfo } = await fetch(`https://www.mxnzp.com/api/ip/self?app_id=${appId}&app_secret=${appSecret}`).then(res => res.json());\r\n\t\tif (ipInfo) {\r\n\t\t\tlet { province, city } = ipInfo;\r\n\t\t\tawait sleep(1);\r\n\t\t\t// 获取天气信息\r\n\t\t\tlet { data: weatherInfo } = await fetch(` https://www.mxnzp.com/api/weather/current/${city}?app_id=${appId}&app_secret=${appSecret}`).then(res => res.json());\r\n\t\t\tif (weatherInfo) {\r\n\t\t\t\tresStr += `\\n\\n${weatherInfo.address}｜${weatherInfo.temp}｜${weatherInfo.weather}｜风向${weatherInfo.windDirection}｜风力${weatherInfo.windPower}｜湿度${weatherInfo.humidity}`\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 获取当日万年历\r\n\t\t// await sleep(1);\r\n\t\t// let { data: dayInfo } = await fetch(\r\n\t\t// \t`https://www.mxnzp.com/api/holiday/single/${dayjs().format('YYYYMMDD')}?app_id=${appId}&app_secret=${appSecret}`).then(res => res.json())\r\n\t\t// if (dayInfo) {\r\n\t\t// \tresStr += `\\n${dayInfo.date}｜${dayInfo.yearTips}年｜${dayInfo.typeDes}｜农历${dayInfo.lunarCalendar}｜${dayInfo.solarTerms}`;\r\n\t\t// }\r\n\t} catch (e) {\r\n\t}\r\n\treturn { success: true, data: resStr, err_msg: '' };\r\n\r\n}","import { resetSelf } from \"./user\";\r\nimport { resetContextMenus } from \"./contextMenus\";\r\nimport { sendMessageToTab } from \"../chrome\";\r\n/*\r\n* 当标签页发生变化\r\n* */\r\n\r\nexport const tabOnUpdate = async (tabId, changeInfo, tab) => {\r\n\t// 是否完毕\r\n\tif (changeInfo.status !== \"complete\") return;\r\n\t// 是否是掘金的标签页\r\n\tlet isJueJin = tab.url.includes('juejin.cn');\r\n\tif (isJueJin) await resetSelf()\r\n\tawait resetContextMenus();\r\n\tif (isJueJin) sendMessageToTab(tabId, { event: \"page-change-complete\" })\r\n}","// 用户相关\r\nimport {\r\n\tcheckIn,\r\n\tcollectBug,\r\n\tdrawLottery,\r\n\tgetLotteryConfig,\r\n\tgetNotCollectBug, getSelfInfo,\r\n\tlogout as apiLogout,\r\n\tgetUserInfo as apiGetUserInfo, getDynamic,\r\n} from \"../api/user\";\r\nimport { getStorage, queryTabs, sendBasicNotifications, setStorage, updateTab } from \"../chrome\";\r\nimport { resetContextMenus } from \"./contextMenus\";\r\nimport { getNotReadMessageCount } from \"../api/message\";\r\nimport { dayjs } from \"../../../tool\";\r\n\r\n/*\r\n* 获取登录用户缓存\r\n* */\r\nexport const getSelfStorage = async () => {\r\n\treturn await getStorage('self-info')\r\n}\r\n\r\n/*\r\n* 设置登录用户缓存\r\n* */\r\nexport const setSelfStorage = async (storage) => {\r\n\tawait setStorage('self-info', storage)\r\n}\r\n\r\n/*重置用户信息*/\r\nexport const resetSelf = async () => {\r\n\tlet { success, data } = await getSelfInfo();\r\n\tif (!success) return setSelfStorage(null);\r\n\tawait setSelfStorage(data);\r\n\treturn data\r\n}\r\n\r\n/*\r\n* 获取用户信息\r\n* 缓存7天\r\n* */\r\nexport const getUserInfo = async (userId) => {\r\n\tlet storageKey = `user-info-${userId}`\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage) return storage;\r\n\tlet { success, data } = await apiGetUserInfo(userId);\r\n\tif (!success) return null;\r\n\tawait setStorage(storageKey, data, 60 * 24 * 7);\r\n\treturn data;\r\n}\r\n\r\n/*\r\n* 获取年度用户动态列表\r\n* @param userId 用户id\r\n* @param isRefresh 是否获取最新，如果为否永远获取缓存\r\n* */\r\nexport const getYearDynamic = async ({ userId, isRefresh }) => {\r\n\tlet storageKey = `year-dynamic-${userId}`;\r\n\t// 获取缓存\r\n\tlet storage = await getStorage(storageKey);\r\n\tif (storage && !isRefresh) return storage;\r\n\tstorage = { count: 0, time: dayjs().format('YYYY-MM-DD HH:mm:ss'), info: {} };\r\n\t// 先获取总数\r\n\tlet { success, data } = await getDynamic(userId, 0);\r\n\tif (!success) return storage\r\n\t// count是动态总数\r\n\tlet { count, list } = data;\r\n\tstorage.count = count;\r\n\tlet dynamics = [...list];\r\n\t// 每份20个\r\n\tlet cursors = new Array(Math.ceil(count / 20)).fill(null).map((item, index) => 20 * index);\r\n\t// 第一个已经获取过，移除\r\n\tcursors.shift();\r\n\t// 取出前30个\r\n\tcursors = cursors.splice(0, 20);\r\n\t// 开始并发请求\r\n\tlet dynamicsRes = await Promise.all(cursors.map(cursor => getDynamic(userId, cursor)));\r\n\tdynamicsRes.forEach(dynamicRes => {\r\n\t\tif (dynamicRes.success) {\r\n\t\t\tdynamics.push(...dynamicRes.data.list);\r\n\t\t}\r\n\t})\r\n\t// 开始处理数据\r\n\tfor (let dynamic of dynamics) {\r\n\t\tlet year = dayjs(dynamic.time * 1000).format('YYYY')\r\n\t\tlet date = dayjs(dynamic.time * 1000).format('MM-DD');\r\n\t\tif (storage.info[year]) {\r\n\t\t\tif (storage.info[year][date]) {\r\n\t\t\t\tstorage.info[year][date].push(dynamic.action)\r\n\t\t\t} else {\r\n\t\t\t\tstorage.info[year][date] = [dynamic.action]\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstorage.info[year] = { [date]: [dynamic.action] }\r\n\t\t}\r\n\t}\r\n\tawait setStorage(storageKey, storage);\r\n\treturn storage;\r\n}\r\n\r\n/*\r\n* 开始循环获取未读消息数\r\n* */\r\nexport const loopNotReadMessageCount = () => {\r\n\tsetInterval(async () => {\r\n\t\tif (await getSelfStorage()) {\r\n\t\t\tlet { success, data } = await getNotReadMessageCount();\r\n\t\t\tif (!success) return;\r\n\t\t\t// count[1]：点赞和收藏  count[3]：评论\r\n\t\t\tlet { count, total } = data;\r\n\t\t\tlet items = [];\r\n\t\t\tif (count[1]) items.push(`点赞和收藏：${count[1]}条`);\r\n\t\t\tif (count[3]) items.push(`评论：${count[3]}条`);\r\n\t\t\tlet notReadStrStorage = await getStorage(\"message-not-read\");\r\n\t\t\t// 有未读且详情文字不相同\r\n\t\t\tif (total && notReadStrStorage !== JSON.stringify(items)) {\r\n\t\t\t\tsendBasicNotifications(`您有${total}条掘金未读消息，以下为详细内容`, `${items.join('\\n')}`);\r\n\t\t\t}\r\n\t\t\tawait setStorage(\"message-not-read\", JSON.stringify(items));\r\n\t\t}\r\n\t}, 1000 * 10)\r\n}\r\n\r\n/*\r\n* 用户登出\r\n* 登出后刷新所有相关页面\r\n* */\r\nexport const logout = async () => {\r\n\tapiLogout();\r\n\t// 获取所有掘金相关页面\r\n\tlet tabs = await queryTabs({ url: 'https://juejin.cn/*' });\r\n\t// 将登录用户缓存清空\r\n\tawait setSelfStorage(null);\r\n\t// 重置菜单\r\n\tawait resetContextMenus();\r\n\t// 刷新页面\r\n\tfor (let tab of tabs) {\r\n\t\tupdateTab(tab.id, { url: tab.url });\r\n\t}\r\n}\r\n\r\n/*\r\n* 用户签到\r\n* */\r\nexport const signin = async () => {\r\n\tlet { success, data, err_msg } = await checkIn();\r\n\tsendBasicNotifications(\"掘金签到：\" + (success ? \"成功\" : \"失败\"), success ? `本次新增矿石：${data.incr_point}，当前矿石：${data.sum_point}` : err_msg)\r\n}\r\n\r\n/*\r\n* 修复bug\r\n* */\r\nexport const bugfix = async () => {\r\n\t// 获取未修复bug\r\n\tlet { success, data, err_msg } = await getNotCollectBug();\r\n\tsendBasicNotifications(\"掘金BugFix：\" + (success ? \"成功\" : \"失败\"), success ? `今日掘金bugfix：${data.length}` : err_msg)\r\n\tif (!success) return;\r\n\t// 开始修复bug\r\n\tdata.forEach(bug => collectBug(bug))\r\n}\r\n\r\n/*\r\n* 抽奖\r\n* */\r\nexport const freeLucky = async () => {\r\n\t// 获取今日免费抽奖次数\r\n\tlet res = await getLotteryConfig()\r\n\tif (!res.success) return sendBasicNotifications('今日免费抽奖失败', res.err_msg);\r\n\tif (!res.data.free_count) return sendBasicNotifications('今日免费抽奖失败', '今日免费抽奖次数已经用完');\r\n\t// 开始抽奖\r\n\tres = await drawLottery()\r\n\tif (!res.success) return sendBasicNotifications('今日免费抽奖失败', res.err_msg);\r\n\tsendBasicNotifications('今日免费抽奖成功', `恭喜抽到：${res.data.lottery_name}`);\r\n}","import Dayjs from 'dayjs';\r\nimport weekday from \"dayjs/plugin/weekday\";\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport \"dayjs/locale/zh-cn\";\r\n\r\nDayjs.extend(weekday);\r\nDayjs.extend(relativeTime);\r\nDayjs.locale('zh-cn')\r\n\r\nexport const dayjs = Dayjs;\r\n\r\n/*\r\n* 获取uuid\r\n* */\r\nexport const uuid = () => {\r\n\tvar s = [];\r\n\tvar hexDigits = \"0123456789abcdef\";\r\n\tfor (var i = 0; i < 36; i++) {\r\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n\t}\r\n\ts[14] = \"4\"; // bits 12-15 of the time_hi_and_version field to 0010\r\n\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n\ts[8] = s[13] = s[18] = s[23] = \"-\";\r\n\r\n\tvar uuid = s.join(\"\");\r\n\treturn uuid;\r\n}\r\n\r\n/*\r\n* 睡眠函数\r\n* */\r\nexport const sleep = (x) => {\r\n\treturn new Promise(res => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tres();\r\n\t\t}, x * 1000)\r\n\t})\r\n}\r\n\r\n/*\r\n* 获取掘金动态分数计算\r\n* 0：发布文章\r\n* 1：点赞文章\r\n* 2：发布沸点\r\n* 3：点赞沸点\r\n* 4、关注用户\r\n* 5、关注标签\r\n* */\r\nexport const getDynamicScoreByActions = (actions) => {\r\n\tif (!actions.length) return 0\r\n\tlet score = 0;\r\n\tactions.forEach(action => {\r\n\t\tif (action === 0) score += 70;\r\n\t\tif (action === 1) score += 20;\r\n\t\tif (action === 2) score += 10;\r\n\t\tif (action === 3) score += 5;\r\n\t\tif (action === 4) score += 10;\r\n\t})\r\n\t// 活跃度等级\r\n\t// Lv0 —— 活跃度 0\r\n\t// Lv1 —— 活跃度 [1, 20)\r\n\t// Lv2 —— 活跃度 [20, 60)\r\n\t// Lv3 —— 活跃度 [60, 80)\r\n\t// Lv4 —— 活跃度 [80, 100)\r\n\treturn Math.min(score, 100);\r\n}\r\n\r\nexport const getDynamicActionsCount = actions => {\r\n\tif (!actions.length) return {};\r\n\tlet count = {};\r\n\tactions.forEach(action => {\r\n\t\tcount[action] ? count[action]++ : count[action] = 1;\r\n\t})\r\n\treturn count;\r\n}\r\n\r\n/**\r\n * 生成指定范围的随机整数\r\n * @param min\r\n * @param max\r\n * @param type\r\n * @returns int\r\n */\r\nexport const getRandInt = (min, max, type) => {\r\n\ttype = type || 3;\r\n\tmin = Math.ceil(min);\r\n\tmax = Math.floor(max);\r\n\tswitch (type) {\r\n\t\tcase 1: //得到一个两数之间的随机整数,这个值不小于min（如果min不是整数的话，得到一个向上取整的 min），并且小于（但不等于）max  [min,max)\r\n\t\t\treturn Math.floor(Math.random() * (max - min)) + min;\r\n\t\tcase 2: //得到一个两数之间的随机整数，包括两个数在内,这个值比min大（如果min不是整数，那就不小于比min大的整数），但小于（但不等于）max [min,max]\r\n\t\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t\tcase 3: //得到一个两数之间的随机整数， (min,max)\r\n\t\t\treturn Math.floor(Math.random() * (max - min - 1)) + min + 1;\r\n\t}\r\n}\r\n\r\n\r\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=v;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),l=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?l(1,0):l(31,11);case f:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,l=this;r=Number(r);var $=O.p(h),y=function(t){var e=w(l);return O.w(e.date(e.date()+Math.round(t*r)),l)};if($===f)return this.set(f,this.$M+r);if($===c)return this.set(c,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},$={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||$[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,v=this-M,g=O.m(this,M);return g=($={},$[c]=g/12,$[f]=g,$[h]=g/3,$[o]=(v-m)/6048e5,$[a]=(v-m)/864e5,$[u]=v/n,$[s]=v/e,$[i]=v/t,$)[y]||v,l?g:O.a(g)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[g],w.Ls=D,w.p={},w}));","!function(e,_){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=_(require(\"dayjs\")):\"function\"==typeof define&&define.amd?define([\"dayjs\"],_):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_locale_zh_cn=_(e.dayjs)}(this,(function(e){\"use strict\";function _(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var t=_(e),d={name:\"zh-cn\",weekdays:\"星期日_星期一_星期二_星期三_星期四_星期五_星期六\".split(\"_\"),weekdaysShort:\"周日_周一_周二_周三_周四_周五_周六\".split(\"_\"),weekdaysMin:\"日_一_二_三_四_五_六\".split(\"_\"),months:\"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月\".split(\"_\"),monthsShort:\"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月\".split(\"_\"),ordinal:function(e,_){return\"W\"===_?e+\"周\":e+\"日\"},weekStart:1,yearStart:4,formats:{LT:\"HH:mm\",LTS:\"HH:mm:ss\",L:\"YYYY/MM/DD\",LL:\"YYYY年M月D日\",LLL:\"YYYY年M月D日Ah点mm分\",LLLL:\"YYYY年M月D日ddddAh点mm分\",l:\"YYYY/M/D\",ll:\"YYYY年M月D日\",lll:\"YYYY年M月D日 HH:mm\",llll:\"YYYY年M月D日dddd HH:mm\"},relativeTime:{future:\"%s内\",past:\"%s前\",s:\"几秒\",m:\"1 分钟\",mm:\"%d 分钟\",h:\"1 小时\",hh:\"%d 小时\",d:\"1 天\",dd:\"%d 天\",M:\"1 个月\",MM:\"%d 个月\",y:\"1 年\",yy:\"%d 年\"},meridiem:function(e,_){var t=100*e+_;return t<600?\"凌晨\":t<900?\"早上\":t<1100?\"上午\":t<1300?\"中午\":t<1800?\"下午\":\"晚上\"}};return t.default.locale(d,null,!0),d}));","!function(r,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(r=\"undefined\"!=typeof globalThis?globalThis:r||self).dayjs_plugin_relativeTime=e()}(this,(function(){\"use strict\";return function(r,e,t){r=r||{};var n=e.prototype,o={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};function i(r,e,t,o){return n.fromToBase(r,e,t,o)}t.en.relativeTime=o,n.fromToBase=function(e,n,i,d,u){for(var f,a,s,l=i.$locale().relativeTime||o,h=r.thresholds||[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],m=h.length,c=0;c<m;c+=1){var y=h[c];y.d&&(f=d?t(e).diff(i,y.d,!0):i.diff(e,y.d,!0));var p=(r.rounding||Math.round)(Math.abs(f));if(s=f>0,p<=y.r||!y.r){p<=1&&c>0&&(y=h[c-1]);var v=l[y.l];u&&(p=u(\"\"+p)),a=\"string\"==typeof v?v.replace(\"%d\",p):v(p,n,y.l,s);break}}if(n)return a;var M=s?l.future:l.past;return\"function\"==typeof M?M(a):M.replace(\"%s\",a)},n.to=function(r,e){return i(r,e,this,!0)},n.from=function(r,e){return i(r,e,this)};var d=function(r){return r.$u?t.utc():t()};n.toNow=function(r){return this.to(d(this),r)},n.fromNow=function(r){return this.from(d(this),r)}}}));","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekday=t()}(this,(function(){\"use strict\";return function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,i=this.$W,n=(i<t?i+7:i)-t;return this.$utils().u(e)?n:this.subtract(n,\"day\").add(e,\"day\")}}}));","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.5';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins,\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { resetSelf, loopNotReadMessageCount } from \"./controller/user\";\r\nimport { contextMenusOnClick, resetContextMenus } from \"./controller/contextMenus\";\r\nimport { tabOnUpdate } from \"./controller/tabs\";\r\nimport { runtimeOnMessage } from \"./controller/message\";\r\n\r\n// chrome.storage.local.clear();\r\nchrome.contextMenus.onClicked.addListener(contextMenusOnClick);\r\nchrome.tabs.onUpdated.addListener(tabOnUpdate);\r\nchrome.runtime.onMessage.addListener(runtimeOnMessage)\r\nchrome.runtime.onInstalled.addListener(async () => {\r\n\t// 重新获取用户信息\r\n\tawait resetSelf()\r\n\t// 重置按钮组\r\n\tawait resetContextMenus();\r\n\t// 开始循环获取未读消息数量\r\n\tloopNotReadMessageCount();\r\n})\r\n"],"names":["ajax","removeShortMsg","msgId","url","method","data","msg_id","isInclude","getShortMsgList","userId","cursor","sortType","limit","user_id","toString","sort_type","publishShortMsg","content","topicId","sync_to_org","headers","credentials","res","fetch","body","JSON","stringify","then","json","catch","e","err_no","err_msg","handleApiResult","apiRes","Object","assign","success","diggQueryPage","item_type","cancelDigg","itemId","itemType","item_id","getNotReadMessageCount","encode","getTopicShortMsgList","topic_id","id_type","v","i","queryTopicDetail","logout","getSelfInfo","pack_req","user_counter","user_growth_info","user","getUserInfo","checkIn","getNotCollectBug","collectBug","bug","getLotteryConfig","drawLottery","getDynamic","dayjs","uuid","setStorage","key","value","minute","setTime","format","overdueTime","undefined","add","storage","chrome","local","set","getStorage","get","isBefore","sendBasicNotifications","title","message","notifications","create","type","iconUrl","createTab","tab","tabs","queryTabs","search","query","updateTab","tabId","update","sendMessageToTab","info","sendMessage","from","createContextMenu","menu","contextMenus","removeAllContextMenus","removeAll","getSelfStorage","signin","bugfix","freeLucky","resetContextMenusIng","resetContextMenus","id","user_basic","user_name","contexts","parentId","contextMenusOnClick","menuItemId","windowId","selected","getYearDynamic","getPinClubInfo","getUserPins","removePin","getPinClubDayUserRank","getUserZanPins","cancelZanPin","getRandomText","eventHandleMap","get-self-info","handleOnMessage","event","callback","runtimeOnMessage","request","sender","sendResponse","to","apiGetRandomText","getRandInt","sleep","count","pin","pins","clubId","storageKey","isRefresh","time","rank","topicList","next","msg","msg_Info","ctime","startOf","valueOf","push","userMsgMap","userInfoMap","author_user_info","users","userInfo","msgCount","length","sort","a","b","endTime","endOf","clubName","appId","appSecret","resStr","includes","jokeInfo","list","typeList","currentType","newList","typeId","currentNew","typeName","contentList","ipInfo","province","city","weatherInfo","address","temp","weather","windDirection","windPower","humidity","resetSelf","tabOnUpdate","changeInfo","status","isJueJin","apiLogout","apiGetUserInfo","setSelfStorage","dynamics","cursors","Array","Math","ceil","fill","map","item","index","shift","splice","dynamicsRes","Promise","all","forEach","dynamicRes","dynamic","year","date","action","loopNotReadMessageCount","setInterval","total","items","notReadStrStorage","join","incr_point","sum_point","free_count","lottery_name","Dayjs","weekday","relativeTime","extend","locale","s","hexDigits","substr","floor","random","x","setTimeout","getDynamicScoreByActions","actions","score","min","getDynamicActionsCount","max","onClicked","addListener","onUpdated","runtime","onMessage","onInstalled"],"sourceRoot":""}